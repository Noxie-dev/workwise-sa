import{j as e}from"./vendor-ui-s4VaHhe3.js";import{b as x}from"./vendor-react-BLR_YkO_.js";import{H as Ge}from"./Helmet-0wtNoWcg.js";import{u as He}from"./vendor-router-B3zuYAIM.js";import{t as B,F as R,c,f as w,a as o,b as i,d,e as j}from"./form-DscTub4z.js";import{u as z,z as l}from"./vendor-forms-BbWomOe6.js";import{C as Me,b as Ye,c as $e,d as Je,a as qe}from"./card-8UZPBAHq.js";import{u as Xe,f as Ze,B as b,A as Y,a as $,b as J,k as _e}from"./index-9094wa89.js";import{T as Ke,a as Qe,b as G,c as H}from"./tabs-BM3G3Ofl.js";import{I as k}from"./input-IlxudZmX.js";import{T as D}from"./textarea-Cql9auRd.js";import{S as q,a as X,b as Z,c as _,d as C}from"./select-aXx2Wv-A.js";import{C as A}from"./checkbox-B6HXUg6f.js";import{B as E}from"./badge-D2cBkUuv.js";import{T as es,a as ss,b as as,c as rs,D as ts,d as ls,e as ns,f as os,g as is}from"./dialog-CIc8KdEJ.js";import{p as K}from"./profileService-CVm8ufKb.js";import{D as be,I as cs,H as ds,J as ms,F as us,K as hs,i as Q,N as ps,C as Ne,O as xs}from"./vendor-icons-CgtSIdDt.js";import"./vendor-charts-CaNT0DhE.js";import"./label-Bf6ViPYU.js";import"./vendor-query-Cm3gWw8b.js";import"./apiClient-Ddw1nvhZ.js";const U="/.netlify/functions/api",Ce={async uploadProfileImage(N,r){try{const m=new FormData;m.append("file",N),m.append("userId",r);const p=await fetch(`${U}/api/files/upload-profile-image`,{method:"POST",body:m});if(!p.ok){const g=await p.json();throw new Error(g.error||"Failed to upload profile image")}return(await p.json()).data.fileUrl}catch(m){throw console.error("Error uploading profile image:",m),m}},async uploadCV(N,r){try{const m=new FormData;m.append("file",N),m.append("userId",r);const p=await fetch(`${U}/api/files/upload-cv`,{method:"POST",body:m});if(!p.ok){const g=await p.json();throw new Error(g.error||"Failed to upload CV")}return(await p.json()).data.fileUrl}catch(m){throw console.error("Error uploading CV:",m),m}},async uploadFile(N,r,m){try{const p=new FormData;p.append("file",N),p.append("userId",r),p.append("fileType",m);const y=await fetch(`${U}/api/files/upload`,{method:"POST",body:p});if(!y.ok){const W=await y.json();throw new Error(W.error||"Failed to upload file")}return(await y.json()).data}catch(p){throw console.error("Error uploading file:",p),p}},async getUserFiles(N){try{const r=await fetch(`${U}/api/files/user/${N}`);if(!r.ok){const p=await r.json();throw new Error(p.error||"Failed to get user files")}return(await r.json()).data}catch(r){throw console.error("Error getting user files:",r),r}},async deleteFile(N){try{const r=await fetch(`${U}/api/files/${N}`,{method:"DELETE"});if(!r.ok){const p=await r.json();throw new Error(p.error||"Failed to delete file")}return(await r.json()).data.deleted}catch(r){throw console.error("Error deleting file:",r),r}}},js=l.object({fullName:l.string().min(2,"Name must be at least 2 characters"),phoneNumber:l.string().min(10,"Phone number must be at least 10 digits"),location:l.string().min(2,"Location must be at least 2 characters"),idNumber:l.string().optional(),dateOfBirth:l.string().optional(),gender:l.string().optional(),bio:l.string().max(300,"Bio must be less than 300 characters").optional(),profilePicture:l.any().optional()}),gs=l.object({highestEducation:l.string(),schoolName:l.string().min(2,"Please enter your school name"),yearCompleted:l.string().optional(),achievements:l.string().optional(),additionalCourses:l.string().optional()}),fs=l.object({hasExperience:l.boolean().default(!1),currentlyEmployed:l.boolean().optional(),jobTitle:l.string().optional(),employer:l.string().optional(),startDate:l.string().optional(),endDate:l.string().optional(),jobDescription:l.string().optional(),previousExperience:l.string().optional(),volunteerWork:l.string().optional(),references:l.string().optional()}),ys=l.object({skills:l.array(l.string()).optional(),customSkills:l.string().optional(),languages:l.array(l.string()).optional(),hasDriversLicense:l.boolean().optional(),hasTransport:l.boolean().optional(),cvUpload:l.any().optional(),createCV:l.boolean().optional()}),qs=()=>{const[,N]=He(),{toast:r}=Xe(),{currentUser:m,isLoading:p}=Ze(),[y,g]=x.useState("personal"),[W,ee]=x.useState(!1),[vs,I]=x.useState({personal:{},education:{},experience:{},skills:{}}),[se,ae]=x.useState(null),[re,te]=x.useState(null),[P,we]=x.useState(null),[le,ne]=x.useState(null),[oe,ke]=x.useState(null),[ie,ce]=x.useState(!1),[de,me]=x.useState(null),[Se,ue]=x.useState(!1),[Ve,L]=x.useState(!1),[bs,Ns]=x.useState(1),[Cs,ws]=x.useState(1),[ks,Ss]=x.useState(!1),[O,he]=x.useState(""),[pe,xe]=x.useState(!1),[T,je]=x.useState(""),[F,ge]=x.useState([]),[M,fe]=x.useState([]),[ye,ve]=x.useState([]);x.useEffect(()=>{const s=setTimeout(()=>{!p&&!m?(console.log("User not authenticated, redirecting to login"),r({variant:"destructive",title:"Authentication Required",description:"Please log in to set up your profile."}),N("/login")):m&&console.log("User authenticated:",m.email)},1e3);return()=>clearTimeout(s)},[m,p,N,r]);const h=z({resolver:B(js),defaultValues:{fullName:(m==null?void 0:m.displayName)||"",phoneNumber:"",location:"",idNumber:"",dateOfBirth:"",gender:"",bio:""}}),u=z({resolver:B(gs),defaultValues:{highestEducation:"",schoolName:"",yearCompleted:"",achievements:"",additionalCourses:""}}),n=z({resolver:B(fs),defaultValues:{hasExperience:!1,currentlyEmployed:!1,jobTitle:"",employer:"",startDate:"",endDate:"",jobDescription:"",previousExperience:"",volunteerWork:"",references:""}}),v=z({resolver:B(ys),defaultValues:{skills:[],customSkills:"",languages:[],hasDriversLicense:!1,hasTransport:!1,createCV:!1}}),Pe=async s=>{if(s.target.files&&s.target.files[0]){const a=s.target.files[0];if(!a.type.startsWith("image/")){r({variant:"destructive",title:"Invalid File",description:"Please upload an image file (JPG, JPEG, or PNG)."});return}const t=new FileReader;t.onloadend=()=>{te(t.result)},t.readAsDataURL(a);try{r({title:"Enhancing Image",description:"We're optimizing your profile picture for better quality..."});const f=await K.enhanceImage(a);if(f.success)te(`data:image/jpeg;base64,${f.data.enhancedImage}`),ae(a),r({title:"Image Enhanced",description:"Your profile picture has been optimized for better quality."});else throw new Error(f.error||"Failed to enhance image")}catch(f){console.error("Image enhancement error:",f),r({variant:"destructive",title:"Enhancement Failed",description:"We couldn't enhance your image, but you can still use the original."}),ae(a)}}},De=s=>{if(s.target.files&&s.target.files[0]){const a=s.target.files[0];if(we(a),ke(a.name),a.type.startsWith("image/")){const t=new FileReader;t.onloadend=()=>{ne(t.result)},t.readAsDataURL(a)}else ne(null);r({title:"CV Uploaded",description:`File "${a.name}" has been selected.`})}},Fe=s=>{if(s.personal){const{fullName:a,phoneNumber:t,location:f}=s.personal;h.setValue("fullName",a||""),h.setValue("phoneNumber",t||""),h.setValue("location",f||"")}if(s.education){const{highestEducation:a,schoolName:t,yearCompleted:f,achievements:S}=s.education;u.setValue("highestEducation",a||""),u.setValue("schoolName",t||""),u.setValue("yearCompleted",f||""),u.setValue("achievements",S||"")}if(s.experience){const{jobTitle:a,employer:t,jobDescription:f}=s.experience;n.setValue("hasExperience",!0),n.setValue("jobTitle",a||""),n.setValue("employer",t||""),n.setValue("jobDescription",f||"")}if(s.skills){const{skills:a,languages:t}=s.skills;v.setValue("skills",a||[]),v.setValue("languages",t||[])}I({personal:h.getValues(),education:u.getValues(),experience:n.getValues(),skills:v.getValues()})},Ee=async()=>{if(!P){r({variant:"destructive",title:"No CV File",description:"Please upload a CV file first before scanning."});return}ce(!0),me(null),ue(!1),fe([]),ve([]);try{const s=await K.scanCV(P);if(s.success){const{extractedData:a,warnings:t,confidence:f}=s.data;fe(t||[]),ve(f||[]),Fe(a),ue(!0),L(!0),(t==null?void 0:t.length)>0?r({title:"CV Scanned with Warnings",description:"Some sections need your attention. Please review the preview.",variant:"warning"}):r({title:"CV Scanned Successfully",description:"Your information has been extracted. Please review and make any necessary adjustments."})}else throw new Error(s.error||"Failed to scan CV")}catch(s){console.error("CV scanning error:",s),me(s.message||"Failed to scan CV. Please try again or fill in the forms manually."),r({variant:"destructive",title:"Scanning Failed",description:s.message||"Failed to scan CV. Please try again or fill in the forms manually."})}finally{ce(!1)}},Ie=async()=>{if(O.trim()){xe(!0);try{const s={personal:h.getValues(),education:u.getValues(),experience:n.getValues(),skills:v.getValues()},a=await K.processAIPrompt(O,s,M);if(a.success)a.data.personal&&(h.setValue("fullName",a.data.personal.fullName||h.getValues("fullName")),h.setValue("phoneNumber",a.data.personal.phoneNumber||h.getValues("phoneNumber")),h.setValue("location",a.data.personal.location||h.getValues("location")),h.setValue("bio",a.data.personal.bio||h.getValues("bio"))),a.data.education&&(u.setValue("highestEducation",a.data.education.highestEducation||u.getValues("highestEducation")),u.setValue("schoolName",a.data.education.schoolName||u.getValues("schoolName")),u.setValue("yearCompleted",a.data.education.yearCompleted||u.getValues("yearCompleted")),u.setValue("achievements",a.data.education.achievements||u.getValues("achievements")),u.setValue("additionalCourses",a.data.education.additionalCourses||u.getValues("additionalCourses"))),a.data.experience&&(n.setValue("jobTitle",a.data.experience.jobTitle||n.getValues("jobTitle")),n.setValue("employer",a.data.experience.employer||n.getValues("employer")),n.setValue("startDate",a.data.experience.startDate||n.getValues("startDate")),n.setValue("endDate",a.data.experience.endDate||n.getValues("endDate")),n.setValue("jobDescription",a.data.experience.jobDescription||n.getValues("jobDescription")),n.setValue("previousExperience",a.data.experience.previousExperience||n.getValues("previousExperience")),n.setValue("volunteerWork",a.data.experience.volunteerWork||n.getValues("volunteerWork"))),a.data.skills&&v.setValue("skills",a.data.skills.skills||v.getValues("skills")),r({title:"AI Suggestions Applied",description:"The AI has made improvements based on your prompt. Please review the changes."});else throw new Error(a.error||"Failed to process AI prompt")}catch(s){r({variant:"destructive",title:"AI Processing Failed",description:s.message||"Failed to process your request. Please try again."})}finally{xe(!1),he("")}}},Te=()=>{if(T.trim()&&!F.includes(T.trim())){const s=[...F,T.trim()];ge(s),v.setValue("customSkills",s.join(", ")),je("")}},Ae=s=>{const a=F.filter(t=>t!==s);ge(a),v.setValue("customSkills",a.join(", "))},Ue=s=>{I(a=>({...a,personal:s})),g("education")},We=s=>{I(a=>({...a,education:s})),g("experience")},Le=s=>{I(a=>({...a,experience:s})),g("skills")},Oe=async s=>{I(a=>({...a,skills:s})),await Be()},Be=async()=>{ee(!0);try{const s={personal:h.getValues(),education:u.getValues(),experience:n.getValues(),skills:{...v.getValues(),customSkills:F.join(", ")}},a=_e();if(!a)throw new Error("User not authenticated");let t=null,f=null;if(se)try{t=await Ce.uploadProfileImage(se,a.uid),console.log("Profile image uploaded:",t)}catch(V){console.error("Profile image upload error:",V),r({variant:"destructive",title:"Image Upload Failed",description:"Failed to upload profile image. Profile will be saved without the image."})}if(P)try{f=await Ce.uploadCV(P,a.uid),console.log("CV file uploaded:",f)}catch(V){console.error("CV file upload error:",V),r({variant:"destructive",title:"CV Upload Failed",description:"Failed to upload CV file. Profile will be saved without the CV."})}const S={...s,personal:{...s.personal,profileImageUrl:t},skills:{...s.skills,cvFileUrl:f}};try{console.log("Profile data to save:",S),t&&a&&await a.updateProfile({displayName:s.personal.fullName,photoURL:t}),r({title:"Profile Updated",description:"Your profile has been successfully set up."}),console.log("Redirecting to profile page"),N("/profile")}catch(V){console.error("API call failed:",V),console.log("Simulating successful profile update for development"),r({title:"Profile Setup Complete",description:"Your profile has been successfully set up."}),console.log("Redirecting to profile page"),N("/profile")}}catch(s){console.error("Profile update error:",s),r({variant:"destructive",title:"Update Failed",description:s.message||"Failed to update your profile. Please try again."}),console.log("Redirecting to profile page despite error"),N("/profile")}finally{ee(!1)}},Re=["Customer Service","Communication","Time Management","Problem Solving","Teamwork","Cash Handling","Computer Basics","Microsoft Office","Inventory Management","Sales","Food Service","Cleaning","Organization","Attention to Detail","Reliability"],ze=["English","Afrikaans","Zulu (isiZulu)","Xhosa (isiXhosa)","Sotho (Sesotho)","Tswana (Setswana)","Tsonga (Xitsonga)","Swati (siSwati)","Venda (Tshivenda)","Ndebele (isiNdebele)","Other"];return e.jsxs(e.Fragment,{children:[e.jsxs(Ge,{children:[e.jsx("title",{children:"Complete Your Profile | WorkWise SA"}),e.jsx("meta",{name:"description",content:"Set up your WorkWise SA profile to find better job opportunities."})]}),e.jsx("main",{className:"flex-grow bg-light py-10",children:e.jsxs("div",{className:"container max-w-4xl mx-auto px-4",children:[e.jsxs(Me,{children:[e.jsxs(Ye,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/images/logo.png",alt:"WorkWise SA Logo",className:"h-36 md:h-40 object-contain transition-all duration-200 hover:scale-105"})}),e.jsx($e,{className:"text-2xl font-bold",children:"Complete Your Profile"}),e.jsx(Je,{children:"Help us understand your skills and experience so we can find the best opportunities for you."})]}),e.jsxs(qe,{children:[e.jsxs(Ke,{value:y,onValueChange:g,className:"w-full",children:[e.jsxs(Qe,{className:"grid grid-cols-4 mb-8",children:[e.jsx(G,{value:"personal",children:"Personal Info"}),e.jsx(G,{value:"education",children:"Education"}),e.jsx(G,{value:"experience",children:"Work Experience"}),e.jsx(G,{value:"skills",children:"Skills & CV"})]}),e.jsx(H,{value:"personal",children:e.jsx(R,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(Ue),className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col items-center mb-6",children:e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("div",{className:"w-32 h-32 mx-auto rounded-full overflow-hidden border-2 border-dashed border-gray-300 flex items-center justify-center bg-gray-50",children:re?e.jsx("img",{src:re,alt:"Profile Preview",className:"w-full h-full object-cover"}):e.jsx(be,{className:"h-8 w-8 text-gray-400"})}),e.jsx(c,{htmlFor:"profile-picture",className:"block mt-2 text-sm font-medium text-gray-700",children:"Profile Picture"}),e.jsx(k,{id:"profile-picture",type:"file",accept:"image/*",onChange:Pe,className:"sr-only"}),e.jsx(b,{type:"button",variant:"outline",size:"sm",onClick:()=>{var s;return(s=document.getElementById("profile-picture"))==null?void 0:s.click()},className:"mt-2",children:"Upload Photo"}),e.jsx(w,{className:"text-xs mt-1",children:"A clear photo helps employers recognize you"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{control:h.control,name:"fullName",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Full Name*"}),e.jsx(d,{children:e.jsx(k,{placeholder:"Enter your full name",...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:h.control,name:"phoneNumber",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Phone Number*"}),e.jsx(d,{children:e.jsx(k,{placeholder:"Enter your phone number",...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:h.control,name:"location",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Location*"}),e.jsx(d,{children:e.jsx(k,{placeholder:"e.g. Johannesburg, Gauteng",...s})}),e.jsx(w,{children:"Where you're currently based"}),e.jsx(j,{})]})}),e.jsx(o,{control:h.control,name:"idNumber",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"ID Number"}),e.jsx(d,{children:e.jsx(k,{placeholder:"Optional - Enter your ID number",...s})}),e.jsx(w,{children:"This helps verify your identity"}),e.jsx(j,{})]})}),e.jsx(o,{control:h.control,name:"dateOfBirth",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Date of Birth"}),e.jsx(d,{children:e.jsx(k,{type:"date",...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:h.control,name:"gender",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Gender"}),e.jsxs(q,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(d,{children:e.jsx(X,{children:e.jsx(Z,{placeholder:"Select your gender"})})}),e.jsxs(_,{children:[e.jsx(C,{value:"male",children:"Male"}),e.jsx(C,{value:"female",children:"Female"}),e.jsx(C,{value:"non-binary",children:"Non-binary"}),e.jsx(C,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),e.jsx(j,{})]})})]}),e.jsx(o,{control:h.control,name:"bio",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"About Me"}),e.jsx(d,{children:e.jsx(D,{placeholder:"Tell employers a bit about yourself, your background, and what you're looking for",className:"resize-none h-24",...s})}),e.jsx(w,{children:"Brief introduction that will appear on your profile (max 300 characters)"}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{type:"button",variant:"default",onClick:()=>g("education"),children:"Fill Form Manually"}),e.jsx("p",{className:"text-sm text-gray-500 ml-4",children:"Complete each section step by step to create your profile"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(b,{type:"button",variant:"secondary",onClick:()=>g("skills"),children:["Auto-fill with CV",e.jsx(es,{children:e.jsxs(ss,{children:[e.jsx(as,{asChild:!0,children:e.jsx(cs,{className:"ml-2 h-4 w-4"})}),e.jsx(rs,{children:e.jsx("p",{children:"Upload your CV to automatically fill in your education, experience, and skills"})})]})})]}),e.jsx("p",{className:"text-sm text-gray-500 ml-4",children:"Upload your CV and let AI extract your information automatically"})]})]})]})})}),e.jsx(H,{value:"education",children:e.jsx(R,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(We),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{control:u.control,name:"highestEducation",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Highest Level of Education"}),e.jsxs(q,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(d,{children:e.jsx(X,{children:e.jsx(Z,{placeholder:"Select your highest education level"})})}),e.jsxs(_,{children:[e.jsx(C,{value:"primary",children:"Primary School"}),e.jsx(C,{value:"some-high-school",children:"Some High School"}),e.jsx(C,{value:"matric",children:"Matric/Grade 12"}),e.jsx(C,{value:"certificate",children:"Certificate"}),e.jsx(C,{value:"diploma",children:"Diploma"}),e.jsx(C,{value:"degree",children:"Bachelor's Degree"}),e.jsx(C,{value:"honors",children:"Honors Degree"}),e.jsx(C,{value:"masters",children:"Master's Degree"}),e.jsx(C,{value:"doctorate",children:"Doctorate"})]})]}),e.jsx(w,{children:"Select the highest level of education you've completed"}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"schoolName",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"School/Institution Name*"}),e.jsx(d,{children:e.jsx(k,{placeholder:"Enter the name of your school or institution",...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"yearCompleted",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Year Completed"}),e.jsxs(q,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(d,{children:e.jsx(X,{children:e.jsx(Z,{placeholder:"Select year completed"})})}),e.jsxs(_,{children:[e.jsx(C,{value:"in-progress",children:"Currently Studying"}),Array.from({length:50},(a,t)=>new Date().getFullYear()-t).map(a=>e.jsx(C,{value:a.toString(),children:a},a))]})]}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"achievements",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Achievements & Subjects"}),e.jsx(d,{children:e.jsx(D,{placeholder:"Optional - List any notable achievements or subjects you excelled in",className:"resize-none h-24",...s})}),e.jsx(w,{children:'For example: "Passed with distinction in mathematics", "Computer literacy certificate"'}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"additionalCourses",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Additional Courses or Training"}),e.jsx(d,{children:e.jsx(D,{placeholder:"Optional - List any additional courses, training or workshops you've attended",className:"resize-none h-24",...s})}),e.jsx(w,{children:"Include short courses, online certifications, or any training programs"}),e.jsx(j,{})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>g("personal"),children:"Back to Personal Info"}),e.jsx(b,{type:"submit",children:"Next: Work Experience"})]})]})})}),e.jsx(H,{value:"experience",children:e.jsx(R,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(Le),className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"flex items-start mb-4",children:e.jsx(o,{control:n.control,name:"hasExperience",render:({field:s})=>e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(d,{children:e.jsx("input",{type:"checkbox",checked:s.value,onChange:s.onChange,className:"h-5 w-5 rounded border-gray-300"})}),e.jsx(c,{className:"text-base font-semibold cursor-pointer",children:"I have work experience"})]})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"It's okay if you don't have formal work experience yet. Many employers value potential and willingness to learn. You can still list informal work like helping at a family business, community projects, or volunteer positions."})]}),n.watch("hasExperience")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium mb-4",children:"Current or Most Recent Job"}),e.jsx("div",{className:"mb-4",children:e.jsx(o,{control:n.control,name:"currentlyEmployed",render:({field:s})=>e.jsxs(i,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(d,{children:e.jsx("input",{type:"checkbox",checked:s.value,onChange:s.onChange,className:"h-5 w-5 rounded border-gray-300"})}),e.jsx(c,{className:"font-normal cursor-pointer",children:"I am currently working here"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{control:n.control,name:"jobTitle",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Job Title"}),e.jsx(d,{children:e.jsx(k,{placeholder:"e.g. Sales Assistant",...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:n.control,name:"employer",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Company/Employer"}),e.jsx(d,{children:e.jsx(k,{placeholder:"e.g. ABC Store",...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:n.control,name:"startDate",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Start Date"}),e.jsx(d,{children:e.jsx(k,{type:"month",...s})}),e.jsx(j,{})]})}),!n.watch("currentlyEmployed")&&e.jsx(o,{control:n.control,name:"endDate",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"End Date"}),e.jsx(d,{children:e.jsx(k,{type:"month",...s})}),e.jsx(j,{})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(o,{control:n.control,name:"jobDescription",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Job Responsibilities"}),e.jsx(d,{children:e.jsx(D,{placeholder:"Describe your main duties and achievements",className:"resize-none h-24",...s})}),e.jsx(w,{children:'For example: "Helped customers find products, operated the cash register, kept the store tidy"'}),e.jsx(j,{})]})})})]}),e.jsx(o,{control:n.control,name:"previousExperience",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Other Work Experience"}),e.jsx(d,{children:e.jsx(D,{placeholder:"List any other jobs you've had (job title, company, dates)",className:"resize-none h-24",...s})}),e.jsx(w,{children:"Include informal work like helping at a family business or temporary jobs"}),e.jsx(j,{})]})})]}),e.jsx(o,{control:n.control,name:"volunteerWork",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Volunteer Experience or Community Work"}),e.jsx(d,{children:e.jsx(D,{placeholder:"Describe any volunteer work or community activities",className:"resize-none h-24",...s})}),e.jsx(w,{children:"Include church activities, community projects, or helping neighbors - these build valuable skills!"}),e.jsx(j,{})]})}),e.jsx(o,{control:n.control,name:"references",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"References"}),e.jsx(d,{children:e.jsx(D,{placeholder:"Optional - List people who can recommend you (name, position, contact details)",className:"resize-none h-24",...s})}),e.jsx(w,{children:"These could be previous employers, teachers, or community leaders who know your abilities"}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>g("education"),children:"Back to Education"}),e.jsx(b,{type:"submit",children:"Next: Skills & CV"})]})]})})}),e.jsx(H,{value:"skills",children:e.jsx(R,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(Oe),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Your Skills"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select skills that you have. Don't worry if you're just starting out - everyone has valuable skills!"}),e.jsx(o,{control:v.control,name:"skills",render:()=>e.jsxs(i,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Re.map(s=>e.jsx(o,{control:v.control,name:"skills",render:({field:a})=>{var t;return e.jsxs(i,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-3",children:[e.jsx(d,{children:e.jsx(A,{checked:(t=a.value)==null?void 0:t.includes(s),onCheckedChange:f=>{var S;return f?a.onChange([...a.value||[],s]):a.onChange((S=a.value)==null?void 0:S.filter(V=>V!==s))}})}),e.jsx(c,{className:"font-normal cursor-pointer",children:s})]},s)}},s))}),e.jsx(j,{})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Other Skills"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add any other skills you have that aren't listed above"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(k,{value:T,onChange:s=>je(s.target.value),placeholder:"Type a skill and click Add",className:"flex-1"}),e.jsxs(b,{type:"button",variant:"outline",onClick:Te,disabled:!T.trim(),children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"Add"]})]}),F.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:F.map((s,a)=>e.jsxs("div",{className:"bg-gray-100 rounded-full px-3 py-1 text-sm flex items-center",children:[s,e.jsx("button",{type:"button",onClick:()=>Ae(s),className:"ml-2 text-gray-500 hover:text-red-500",children:e.jsx(ms,{className:"h-4 w-4"})})]},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Languages"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select languages that you can speak"}),e.jsx(o,{control:v.control,name:"languages",render:()=>e.jsxs(i,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:ze.map(s=>e.jsx(o,{control:v.control,name:"languages",render:({field:a})=>{var t;return e.jsxs(i,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-3",children:[e.jsx(d,{children:e.jsx(A,{checked:(t=a.value)==null?void 0:t.includes(s),onCheckedChange:f=>{var S;return f?a.onChange([...a.value||[],s]):a.onChange((S=a.value)==null?void 0:S.filter(V=>V!==s))}})}),e.jsx(c,{className:"font-normal cursor-pointer",children:s})]},s)}},s))}),e.jsx(j,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{control:v.control,name:"hasDriversLicense",render:({field:s})=>e.jsxs(i,{className:"flex items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(d,{children:e.jsx(A,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(c,{className:"font-medium cursor-pointer",children:"I have a driver's license"}),e.jsx(w,{children:"Important for jobs that require driving"})]})]})}),e.jsx(o,{control:v.control,name:"hasTransport",render:({field:s})=>e.jsxs(i,{className:"flex items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(d,{children:e.jsx(A,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(c,{className:"font-medium cursor-pointer",children:"I have access to transportation"}),e.jsx(w,{children:"Important for jobs that require transportation"})]})]})})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-gray-50 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Upload Your CV"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload your CV to auto-populate your profile information using AI. We support PDF, Word documents, and image formats."}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg bg-white",children:[le?e.jsx("div",{className:"mb-4 w-full max-w-md",children:e.jsx("img",{src:le,alt:"CV Preview",className:"mx-auto max-h-60 object-contain border rounded"})}):oe?e.jsxs("div",{className:"mb-4 flex items-center space-x-2",children:[e.jsx(us,{className:"h-10 w-10 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:oe}),e.jsx("p",{className:"text-sm text-gray-500",children:(P==null?void 0:P.type)||"Document"})]})]}):e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(hs,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Drag and drop or click to upload"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supports PDF, DOC, DOCX, JPG, PNG"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.jsx(k,{id:"cv-upload",type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.tif,.tiff",onChange:De,className:"sr-only"}),e.jsxs(b,{type:"button",variant:"outline",onClick:()=>{var s;return(s=document.getElementById("cv-upload"))==null?void 0:s.click()},children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Browse Files"]}),e.jsx(b,{type:"button",variant:"default",onClick:Ee,disabled:!P||ie,children:ie?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Scan with AI"]})})]})]}),de&&e.jsxs(Y,{variant:"destructive",className:"mt-4",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx($,{children:"Error"}),e.jsx(J,{children:de})]}),Se&&e.jsxs(Y,{variant:"success",className:"mt-4 bg-green-50 border-green-200 text-green-800",children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx($,{children:"CV Scan Complete"}),e.jsx(J,{children:"Your CV was successfully analyzed and the information has been used to populate your profile forms. Please review all sections to ensure accuracy."})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-4",children:[e.jsx(E,{variant:"outline",className:"text-xs",children:"PDF"}),e.jsx(E,{variant:"outline",className:"text-xs",children:"DOCX"}),e.jsx(E,{variant:"outline",className:"text-xs",children:"DOC"}),e.jsx(E,{variant:"outline",className:"text-xs",children:"JPG"}),e.jsx(E,{variant:"outline",className:"text-xs",children:"PNG"}),e.jsx(E,{variant:"outline",className:"text-xs",children:"TIF"})]}),e.jsx(o,{control:v.control,name:"createCV",render:({field:s})=>e.jsxs(i,{className:"flex items-start space-x-3 space-y-0 mt-4",children:[e.jsx(d,{children:e.jsx(A,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(c,{className:"font-medium cursor-pointer",children:"I don't have a CV - help me create one"}),e.jsx(w,{children:"We'll use the information you provide to generate a professional CV for you"})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>g("experience"),className:"border-gray-300 text-gray-600 hover:bg-gray-100 hover:text-gray-800",children:"Back to Experience"}),e.jsx(b,{type:"submit",disabled:W,variant:"outline",className:"bg-white text-primary hover:bg-yellow-400 hover:text-blue-800 hover:border-yellow-500 font-medium border-primary transition-colors",children:W?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Complete Profile Setup"})]})]})})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(b,{variant:"outline",onClick:()=>{y!=="personal"&&(y==="education"&&g("personal"),y==="experience"&&g("education"),y==="skills"&&g("experience"))},disabled:y==="personal",className:"border-gray-300 text-gray-600 hover:bg-gray-100 hover:text-gray-800",children:"Previous"}),y!=="skills"?e.jsx(b,{onClick:()=>{y==="personal"&&g("education"),y==="education"&&g("experience"),y==="experience"&&g("skills")},disabled:y==="personal"||y==="education",variant:"outline",className:"bg-white text-primary hover:bg-yellow-400 hover:text-blue-800 hover:border-yellow-500 font-medium border-primary transition-colors",children:"Next"}):null]})]})]}),e.jsx(ts,{open:Ve,onOpenChange:L,children:e.jsxs(ls,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ns,{children:[e.jsx(os,{children:"CV Scan Results"}),e.jsx(is,{children:"Review the extracted information and make any necessary adjustments"})]}),e.jsxs("div",{className:"space-y-6",children:[M.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-yellow-600",children:"Attention Required"}),e.jsx("div",{className:"space-y-2",children:M.map((s,a)=>e.jsxs(Y,{variant:"warning",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx($,{children:s.section}),e.jsxs(J,{children:[s.message,s.suggestedFix&&e.jsxs("p",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Suggested Fix:"})," ",s.suggestedFix]})]})]},a))})]}),ye.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Scan Confidence"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ye.map((s,a)=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:s.section}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.confidence*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:`h-full rounded-full ${s.confidence>.8?"bg-green-500":s.confidence>.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s.confidence*100}%`}})}),s.notes&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.notes})]})},a))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Need Help with Corrections?"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{placeholder:"Describe any issues or ask for help with specific sections...",value:O,onChange:s=>he(s.target.value),className:"min-h-[100px]"}),e.jsx(b,{onClick:Ie,disabled:pe||!O.trim(),className:"w-full",children:pe?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Get AI Assistance"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(b,{variant:"outline",onClick:()=>L(!1),children:"Close"}),e.jsx(b,{onClick:()=>{L(!1),g("skills")},children:"Continue to Skills"})]})]})]})})]})})]})};export{qs as default};
