import{j as e}from"./vendor-ui-s4VaHhe3.js";import{C as b}from"./CustomHelmet-C_Zi0UWb.js";import{b as l,R as p}from"./vendor-react-BLR_YkO_.js";import{u as S,L as C}from"./vendor-router-B3zuYAIM.js";import{B as y,u as F,A as E,a as k,b as A,E as I}from"./index-9094wa89.js";import{I as L}from"./input-IlxudZmX.js";import{j as T,C as O,a as H}from"./vendor-icons-CgtSIdDt.js";import{C as W,a as q,b as B}from"./CtaSection-bzBf2Syl.js";import{u as D}from"./vendor-query-Cm3gWw8b.js";import{S as x}from"./skeleton-65i7iYhM.js";import{J as $}from"./JobCard-CD5L-jEY.js";import"./vendor-charts-CaNT0DhE.js";import"./card-8UZPBAHq.js";import"./badge-D2cBkUuv.js";const U=()=>{const[c,m]=l.useState(""),[,i]=S(),t=n=>{n.preventDefault(),i(`/jobs?q=${encodeURIComponent(c)}`)};return e.jsxs("section",{className:"relative bg-[#2A4365] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-15",children:e.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.25' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsx("div",{className:"container mx-auto px-4 py-12 md:py-16 relative z-10",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center mb-8 md:mb-10",children:[e.jsxs("div",{className:"mb-6 md:mb-0 md:mr-10",children:[e.jsx("img",{src:"/images/hero-logo.png",alt:"WorkWise SA Hard Hat Logo",className:"w-32 h-32 md:w-48 md:h-48"}),e.jsxs("div",{className:"text-yellow-300 text-center font-bold mt-2 text-xl md:text-2xl",children:["WORK",e.jsx("span",{className:"text-white",children:"WISE.SA"})]})]}),e.jsxs("div",{className:"text-center md:text-left md:self-end",children:[e.jsx("div",{className:"text-yellow-300 font-bold text-2xl md:text-3xl lg:text-4xl mb-3",children:"FIND THAT NEEDED JOB"}),e.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-tight tracking-tight",children:["IN SOUTH",e.jsx("br",{}),"AFRICA"]})]})]}),e.jsx("div",{className:"bg-white p-3 rounded-lg shadow-lg mx-auto w-full max-w-2xl mt-4",children:e.jsx("form",{onSubmit:t,children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"}),e.jsx(L,{type:"text",placeholder:"Search for jobs...",className:"w-full pl-10 pr-3 py-3 rounded-md border-0 shadow-none text-lg focus-visible:ring-0",value:c,onChange:n=>m(n.target.value)})]})}),e.jsx("div",{className:"sm:w-auto w-full",children:e.jsx(y,{type:"submit",className:"w-full md:w-auto bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-medium py-3 px-8 text-lg",children:"Search"})})]})})})]})})]})},M=()=>{const[c,m]=l.useState([]),[i,t]=l.useState(!0),{toast:n}=F();l.useEffect(()=>{try{const a=localStorage.getItem("jobFavorites");a&&m(JSON.parse(a))}catch(a){console.error("Error loading favorites from localStorage:",a),n({variant:"destructive",title:"Error loading favorites",description:"Your saved jobs could not be loaded"})}finally{t(!1)}},[n]),l.useEffect(()=>{if(!i)try{localStorage.setItem("jobFavorites",JSON.stringify(c))}catch(a){console.error("Error saving favorites to localStorage:",a),n({variant:"destructive",title:"Error saving favorites",description:"Your job could not be saved"})}},[c,i,n]);const g=l.useCallback(a=>{m(o=>o.includes(a)?o:[...o,a])},[]),h=l.useCallback(a=>{m(o=>o.filter(u=>u!==a))},[]),j=l.useCallback(a=>{m(o=>o.includes(a)?o.filter(u=>u!==a):[...o,a])},[]),r=l.useCallback(a=>c.includes(a),[c]);return{favorites:c,isLoading:i,addFavorite:g,removeFavorite:h,toggleFavorite:j,isFavorite:r}},P=({title:c="Featured Opportunities",subtitle:m="Discover top employment opportunities from leading companies in South Africa",maxDisplay:i=6,filter:t,className:n})=>{const{favorites:g,toggleFavorite:h}=M(),j=p.useMemo(()=>{const s=["/api/jobs"];return t!=null&&t.featured&&s.push("featured"),t!=null&&t.category&&s.push(`category=${t.category}`),t!=null&&t.location&&s.push(`location=${t.location}`),s},[t]),{data:r,isLoading:a,error:o}=D({queryKey:j,queryFn:async()=>{try{let s="/api/jobs/featured";const d=new URLSearchParams;t!=null&&t.category&&d.append("category",t.category),t!=null&&t.location&&d.append("location",t.location),t!=null&&t.featured&&d.append("featured","true");const f=d.toString();f&&(s+=`?${f}`);const v=await fetch(s);if(!v.ok)throw new Error("Failed to fetch jobs");return v.json()}catch(s){return console.error("Error fetching jobs:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},refetchOnWindowFocus:!1}),u=p.useMemo(()=>!(r!=null&&r.success)||!r.data?[]:r.data.map(s=>{const d={id:s.id,name:s.company,logo:s.companyLogo,location:s.location,slug:s.company.toLowerCase().replace(/\\s+/g,"-"),openPositions:1};return{id:s.id,title:s.title,description:s.description,location:s.location,salary:s.salary,jobType:s.type,workMode:"On-site",companyId:s.id,categoryId:1,isFeatured:s.isFeatured,createdAt:new Date(s.postedDate),requirements:s.requirements,company:d}}).slice(0,i),[r,i]),w=l.useCallback((s,d)=>{h(s)},[h]),N=l.useCallback(()=>Array(i).fill(0).map((s,d)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-card overflow-hidden","data-testid":"job-skeleton",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"w-12 h-12 rounded-md mr-3"}),e.jsxs("div",{children:[e.jsx(x,{className:"h-5 w-40 mb-2"}),e.jsx(x,{className:"h-4 w-32"})]})]}),e.jsx(x,{className:"h-8 w-8 rounded-full"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{className:"h-5 w-16 rounded-full"}),e.jsx(x,{className:"h-5 w-16 rounded-full"})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(x,{className:"h-5 w-24"}),e.jsx(x,{className:"h-4 w-20"})]})]})]},d)),[i]);return o||(r==null?void 0:r.success)===!1?e.jsx("section",{className:"py-10 md:py-16 bg-light",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(E,{variant:"destructive",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx(k,{children:"Error"}),e.jsx(A,{children:(r==null?void 0:r.error)||"Failed to load jobs. Please try again later."})]})})}):e.jsx("section",{className:`py-10 md:py-16 bg-light ${n||""}`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:c}),e.jsx("p",{className:"text-muted",children:m})]}),e.jsx(I,{children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6","data-testid":"jobs-grid",children:a?N():u.length>0?u.map(s=>e.jsx($,{job:s,initialFavoriteState:g.includes(s.id),onFavoriteToggle:w},s.id)):e.jsx("div",{className:"col-span-full text-center py-10",children:e.jsx("p",{className:"text-muted",children:"No jobs found matching your criteria."})})})}),e.jsx("div",{className:"text-center mt-10",children:e.jsx(y,{variant:"outline",asChild:!0,className:"inline-flex items-center justify-center border-primary text-primary hover:bg-primary hover:text-white transition-colors",children:e.jsxs(C,{href:"/jobs",children:["Browse All Jobs ",e.jsx(H,{className:"ml-2 h-4 w-4"})]})})})]})})},ae=()=>e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"WorkWise SA - Find Essential Jobs in South Africa",description:"Find cashier, general worker, security, petrol attendant, domestic worker, cleaner, and landscaping jobs across South Africa."}),e.jsxs("main",{className:"flex-grow",children:[e.jsx(U,{}),e.jsx(W,{}),e.jsx(P,{}),e.jsx(q,{}),e.jsx(B,{})]})]});export{ae as default};
