import{j as e}from"./vendor-ui-s4VaHhe3.js";import{b as c,R as E}from"./vendor-react-BLR_YkO_.js";import{L as T,u as R}from"./vendor-router-B3zuYAIM.js";import{C as z}from"./CustomHelmet-C_Zi0UWb.js";import{C as I,a as B,b as D}from"./CtaSection-p_Opq6qo.js";import{u as P}from"./vendor-query-Cm3gWw8b.js";import{u as q,A as O,a as Y,b as $,E as H,B as X}from"./index-BNVlULwE.js";import{S as y}from"./skeleton-BWR7FKY8.js";import{J as _}from"./JobCard-Dgp3P01k.js";import{C as Q,a as U}from"./vendor-icons-CgtSIdDt.js";import"./card-BYeanzy8.js";import"./vendor-charts-CaNT0DhE.js";import"./badge-Bf80hUz1.js";const K=()=>{const[x,v]=c.useState([]),[h,o]=c.useState(!0),{toast:f}=q();c.useEffect(()=>{try{const n=localStorage.getItem("jobFavorites");n&&v(JSON.parse(n))}catch(n){console.error("Error loading favorites from localStorage:",n),f({variant:"destructive",title:"Error loading favorites",description:"Your saved jobs could not be loaded"})}finally{o(!1)}},[f]),c.useEffect(()=>{if(!h)try{localStorage.setItem("jobFavorites",JSON.stringify(x))}catch(n){console.error("Error saving favorites to localStorage:",n),f({variant:"destructive",title:"Error saving favorites",description:"Your job could not be saved"})}},[x,h,f]);const j=c.useCallback(n=>{v(r=>r.includes(n)?r:[...r,n])},[]),p=c.useCallback(n=>{v(r=>r.filter(s=>s!==n))},[]),b=c.useCallback(n=>{v(r=>r.includes(n)?r.filter(s=>s!==n):[...r,n])},[]),i=c.useCallback(n=>x.includes(n),[x]);return{favorites:x,isLoading:h,addFavorite:j,removeFavorite:p,toggleFavorite:b,isFavorite:i}},G=({title:x="Featured Opportunities",subtitle:v="Discover top employment opportunities from leading companies in South Africa",maxDisplay:h=6,filter:o,className:f})=>{const{favorites:j,toggleFavorite:p}=K(),b=E.useMemo(()=>{const a=["/api/jobs"];return o!=null&&o.featured&&a.push("featured"),o!=null&&o.category&&a.push(`category=${o.category}`),o!=null&&o.location&&a.push(`location=${o.location}`),a},[o]),{data:i,isLoading:n,error:r}=P({queryKey:b,queryFn:async()=>{try{let a="/api/jobs/featured";const l=new URLSearchParams;o!=null&&o.category&&l.append("category",o.category),o!=null&&o.location&&l.append("location",o.location),o!=null&&o.featured&&l.append("featured","true");const g=l.toString();g&&(a+=`?${g}`);const w=await fetch(a);if(!w.ok)throw new Error("Failed to fetch jobs");return w.json()}catch(a){return console.error("Error fetching jobs:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}},refetchOnWindowFocus:!1}),s=E.useMemo(()=>!(i!=null&&i.success)||!i.data?[]:i.data.map(a=>{const l={id:a.id,name:a.company,logo:a.companyLogo,location:a.location,slug:a.company.toLowerCase().replace(/\\s+/g,"-"),openPositions:1};return{id:a.id,title:a.title,description:a.description,location:a.location,salary:a.salary,jobType:a.type,workMode:"On-site",companyId:a.id,categoryId:1,isFeatured:a.isFeatured,createdAt:new Date(a.postedDate),requirements:a.requirements,company:l}}).slice(0,h),[i,h]),d=c.useCallback((a,l)=>{p(a)},[p]),C=c.useCallback(()=>Array(h).fill(0).map((a,l)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-card overflow-hidden","data-testid":"job-skeleton",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"w-12 h-12 rounded-md mr-3"}),e.jsxs("div",{children:[e.jsx(y,{className:"h-5 w-40 mb-2"}),e.jsx(y,{className:"h-4 w-32"})]})]}),e.jsx(y,{className:"h-8 w-8 rounded-full"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{className:"h-5 w-16 rounded-full"}),e.jsx(y,{className:"h-5 w-16 rounded-full"})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{className:"h-5 w-24"}),e.jsx(y,{className:"h-4 w-20"})]})]})]},l)),[h]);return r||(i==null?void 0:i.success)===!1?e.jsx("section",{className:"py-10 md:py-16 bg-light",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(O,{variant:"destructive",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx(Y,{children:"Error"}),e.jsx($,{children:(i==null?void 0:i.error)||"Failed to load jobs. Please try again later."})]})})}):e.jsx("section",{className:`py-10 md:py-16 bg-light ${f||""}`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:x}),e.jsx("p",{className:"text-muted",children:v})]}),e.jsx(H,{children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6","data-testid":"jobs-grid",children:n?C():s.length>0?s.map(a=>e.jsx(_,{job:a,initialFavoriteState:j.includes(a.id),onFavoriteToggle:d},a.id)):e.jsx("div",{className:"col-span-full text-center py-10",children:e.jsx("p",{className:"text-muted",children:"No jobs found matching your criteria."})})})}),e.jsx("div",{className:"text-center mt-10",children:e.jsx(X,{variant:"outline",asChild:!0,className:"inline-flex items-center justify-center border-primary text-primary hover:bg-primary hover:text-white transition-colors",children:e.jsxs(T,{href:"/jobs",children:["Browse All Jobs ",e.jsx(U,{className:"ml-2 h-4 w-4"})]})})})]})})},W=x=>e.jsxs("svg",{...x,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),de=()=>{const[x,v]=c.useState(""),[,h]=R(),o=c.useRef({x:null,y:null}),f=c.useRef(null),j=c.useRef(null),p=c.useRef([]);c.useEffect(()=>{const r=f.current;if(!r)return;const s=r.getContext("2d");if(!s)return;const d=p.current;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){s.clearRect(0,0,r.width,r.height),s.fillStyle="rgba(255, 255, 255, 0.05)",s.font="16px 'Inter', sans-serif",s.textAlign="center",s.fillText("Welcome to WorkWise.SA",r.width/2,r.height/2);return}const a=["Cashier","General Worker","Security","Petrol Attendant","Domestic Worker","Cleaner","Landscaping","Driver","Call Center","Warehouse","Retail","Receptionist","Artisan","Plumber"];let l=r.offsetWidth,g=r.offsetHeight;const w=()=>{l=r.offsetWidth,g=r.offsetHeight,r.width=l,r.height=g,L()},L=()=>{d.length=0;const t=Math.min(a.length*2,24);for(let m=0;m<t;m++){const u=a[m%a.length];d.push({x:Math.random()*l,y:Math.random()*g,text:u,fontSize:Math.random()*6+12,speedX:(Math.random()-.5)*.3,speedY:(Math.random()-.5)*.3,opacity:Math.random()*.4+.3,color:Math.random()>.5?"#FED7AA":"#FFFFFF",rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*.3})}},F=()=>{s.clearRect(0,0,l,g),s.strokeStyle="rgba(255, 255, 255, 0.05)",s.lineWidth=1;for(let t=0;t<d.length;t++)for(let m=t+1;m<d.length;m++){const u=d[t].x-d[m].x,S=d[t].y-d[m].y,N=Math.hypot(u,S);N<150&&(s.beginPath(),s.moveTo(d[t].x,d[t].y),s.lineTo(d[m].x,d[m].y),s.globalAlpha=(1-N/150)*.1,s.stroke())}s.globalAlpha=1,d.forEach(t=>{const m=o.current;if(m.x!==null&&m.y!==null){const S=m.x-t.x,N=m.y-t.y,M=Math.hypot(S,N);if(M<200){const k=(200-M)/200,A=Math.atan2(N,S);t.x+=Math.cos(A)*k*1.5,t.y+=Math.sin(A)*k*1.5,t.opacity=Math.min(.9,t.opacity+k*.2),t.fontSize=Math.min(22,t.fontSize+k*2)}}t.opacity=Math.max(.3,t.opacity-.01),t.fontSize=Math.max(12,t.fontSize-.1),t.x+=t.speedX,t.y+=t.speedY,t.rotation+=t.rotationSpeed;const u=50;(t.x<u||t.x>l-u)&&(t.speedX*=-1),(t.y<u||t.y>g-u)&&(t.speedY*=-1),t.x=Math.max(u,Math.min(l-u,t.x)),t.y=Math.max(u,Math.min(g-u,t.y)),s.save(),s.translate(t.x,t.y),s.rotate(t.rotation*Math.PI/180),s.globalAlpha=t.opacity,s.fillStyle=t.color,s.font=`600 ${t.fontSize}px 'Inter', sans-serif`,s.textAlign="center",s.textBaseline="middle",s.shadowColor=t.color,s.shadowBlur=8,s.fillText(t.text,0,0),s.shadowBlur=15,s.globalAlpha=t.opacity*.5,s.fillText(t.text,0,0),s.restore()}),j.current=requestAnimationFrame(F)};return w(),F(),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),j.current&&cancelAnimationFrame(j.current)}},[]);const b=r=>{const s=r.currentTarget.getBoundingClientRect();o.current={x:r.clientX-s.left,y:r.clientY-s.top}},i=()=>{o.current={x:null,y:null}},n=r=>{r.preventDefault(),x.trim()&&h(`/jobs?q=${encodeURIComponent(x)}`)};return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"WorkWise SA - Find Essential Jobs in South Africa",description:"Find cashier, general worker, security, petrol attendant, domestic worker, cleaner, and landscaping jobs across South Africa."}),e.jsxs("main",{className:"flex-grow",children:[e.jsxs("section",{className:"relative bg-gradient-to-br from-[#1a365d] via-[#2a4365] to-[#2d3748] overflow-hidden min-h-screen flex items-center justify-center font-sans",onMouseMove:b,onMouseLeave:i,children:[e.jsx("canvas",{ref:f,className:"absolute inset-0 w-full h-full",style:{zIndex:1}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/10 via-purple-900/5 to-orange-900/10 motion-safe:animate-pulse",style:{zIndex:2}}),e.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"mb-8 transform hover:scale-105 transition-transform duration-300",children:[e.jsxs("div",{className:"relative group w-32 h-32 md:w-40 md:h-40",children:[e.jsx("img",{src:"/android-chrome-512x512.png",alt:"WorkWise SA Logo",className:"w-full h-full object-cover rounded-full drop-shadow-2xl filter group-hover:drop-shadow-[0_0_25px_rgba(251,191,36,0.4)] transition-all duration-300"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-400/30 motion-safe:animate-spin",style:{animationDuration:"8s"}}),e.jsx("div",{className:"absolute inset-2 rounded-full border border-orange-400/20 motion-safe:animate-spin",style:{animationDuration:"6s",animationDirection:"reverse"}})]}),e.jsxs("div",{className:"text-yellow-300 text-center font-bold mt-4 text-xl md:text-2xl tracking-wide drop-shadow-lg",children:["WORK",e.jsx("span",{className:"text-white",children:"WISE.SA"})]})]}),e.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold text-white leading-tight tracking-tight drop-shadow-2xl mb-4",children:"Find Your Next Opportunity"}),e.jsx("p",{className:"text-lg md:text-xl lg:text-2xl font-light text-white/80 mb-10 max-w-3xl mx-auto",children:"Connecting South Africa's workforce with thousands of jobs in retail, security, driving, and more."}),e.jsxs("form",{onSubmit:n,className:"relative group w-full max-w-2xl",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl blur opacity-40 group-hover:opacity-70 transition duration-500 motion-safe:animate-pulse"}),e.jsx("div",{className:"relative bg-white/95 backdrop-blur-sm p-2 rounded-xl shadow-2xl border border-white/20",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-grow relative",children:[e.jsx(W,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 z-10"}),e.jsx("input",{type:"text",placeholder:"e.g., 'Cashier in Cape Town'",className:"w-full pl-11 pr-3 py-3 rounded-lg border-transparent focus:border-transparent text-lg focus:ring-2 focus:ring-yellow-400/80 bg-white/80 backdrop-blur-sm transition-all duration-300",value:x,onChange:r=>v(r.target.value)})]}),e.jsxs("button",{type:"submit",className:"w-full sm:w-auto bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-gray-900 font-semibold py-3 px-8 text-lg rounded-lg shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300 border-0 flex items-center justify-center gap-2",children:["Search",e.jsx(W,{className:"h-4 w-4"})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-8 md:gap-12 mt-12 text-white",children:[e.jsxs("div",{className:"text-center transform hover:scale-110 transition-transform duration-300",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-yellow-400",children:"10,000+"}),e.jsx("div",{className:"text-sm uppercase tracking-wider text-white/70",children:"Active Jobs"})]}),e.jsxs("div",{className:"text-center transform hover:scale-110 transition-transform duration-300",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-orange-400",children:"500+"}),e.jsx("div",{className:"text-sm uppercase tracking-wider text-white/70",children:"Companies"})]}),e.jsxs("div",{className:"text-center transform hover:scale-110 transition-transform duration-300",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-yellow-400",children:"50,000+"}),e.jsx("div",{className:"text-sm uppercase tracking-wider text-white/70",children:"Job Seekers"})]})]})]})})]}),e.jsx(I,{}),e.jsx(G,{}),e.jsx(B,{}),e.jsx(D,{})]})]})};export{de as default};
