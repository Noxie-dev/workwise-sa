import{a as b,j as e}from"./vendor-BOJOR_z2.js";import{H as v}from"./Helmet-D3USV4CJ.js";import{a as N,u as k,g as F,L as c,s as L,h as C}from"./index-BYuk7_JU.js";import{F as S,a as d,b as m,c as p,d as u,e as h,t as P,z as i}from"./form-BHDrNC-d.js";import{u as I}from"./index.esm-CYlt0PPA.js";import{p as E,t as W,v as M,w as q,q as G,I as g,B as f,N as A}from"./contact-C28TQl3y.js";import{C as H}from"./checkbox-D1FhjMIf.js";import"./index-PjsTQpNX.js";import"./index-B9Pj0zRd.js";const T=i.object({email:i.string().email("Please enter a valid email address"),password:i.string().min(6,"Password must be at least 6 characters"),rememberMe:i.boolean().optional()}),U=()=>{const[l,t]=b.useState(!1),{toast:x}=N(),[,n]=k(),{isAuthenticated:j}=F(),r=I({resolver:P(T),defaultValues:{email:"",password:"",rememberMe:!1}});if(j)return n("/profile"),null;const y=async()=>{t(!0);try{await C(),n("/profile-setup")}catch(s){let a="Failed to sign in with Google. Please try again.";s.code==="auth/operation-not-allowed"?a="Google sign-in is not enabled. Please try another method or contact support.":s.code==="auth/popup-closed-by-user"?a="Sign-in popup was closed. Please try again.":s.code==="auth/cancelled-popup-request"?a="Multiple popup requests were made. Please try again.":s.code==="auth/popup-blocked"&&(a="Sign-in popup was blocked by your browser. Please allow popups for this site."),console.error("Google sign-in error:",s.code,s.message),x({variant:"destructive",title:"Login Failed",description:a})}finally{t(!1)}},w=async s=>{t(!0);try{await L(s.email,s.password),n("/profile-setup")}catch(a){let o="Invalid email or password. Please try again.";a.code==="auth/user-not-found"||a.code==="auth/wrong-password"?o="Invalid email or password. Please try again.":a.code==="auth/too-many-requests"?o="Too many unsuccessful login attempts. Please try again later.":a.code==="auth/network-request-failed"&&(o="Network error. Please check your internet connection."),x({variant:"destructive",title:"Login Failed",description:o})}finally{t(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx("title",{children:"Login | WorkWise SA"}),e.jsx("meta",{name:"description",content:"Login to your WorkWise SA account to access job applications, saved jobs, and profile settings."})]}),e.jsx("main",{className:"flex-grow bg-light flex items-center justify-center py-10",children:e.jsxs(E,{className:"w-full max-w-md mx-4",children:[e.jsxs(W,{className:"space-y-1",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/images/logo.png",alt:"WorkWise SA Logo",className:"h-36 md:h-40 object-contain transition-all duration-200 hover:scale-105"})}),e.jsx(M,{className:"text-2xl font-bold text-center",children:"Login"}),e.jsx(q,{className:"text-center",children:"Enter your credentials to access your account"})]}),e.jsx(G,{children:e.jsxs(S,{...r,children:[e.jsxs("form",{onSubmit:r.handleSubmit(w),className:"space-y-4",children:[e.jsx(d,{control:r.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(p,{children:"Email"}),e.jsx(u,{children:e.jsx(g,{type:"email",placeholder:"Enter your email",...s})}),e.jsx(h,{})]})}),e.jsx(d,{control:r.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(p,{children:"Password"}),e.jsx(u,{children:e.jsx(g,{type:"password",placeholder:"Enter your password",...s})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{control:r.control,name:"rememberMe",render:({field:s})=>e.jsxs(m,{className:"flex items-center space-x-2 space-y-0",children:[e.jsx(u,{children:e.jsx(H,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(p,{className:"text-sm font-normal cursor-pointer",children:"Remember me"})]})}),e.jsx(c,{href:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),e.jsx(f,{type:"submit",className:"w-full bg-primary",disabled:l,children:l?"Logging in...":"Login"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(c,{href:"/email-link-login",className:"text-sm text-primary hover:underline",children:"Sign in with email link (no password required)"})})]})}),e.jsxs(A,{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-light px-2 text-muted",children:"Or continue with"})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs(f,{variant:"outline",className:"w-full",onClick:y,disabled:l,children:[e.jsx("i",{className:"fab fa-google mr-2"})," Google"]})}),e.jsxs("p",{className:"text-center text-sm text-muted mt-4",children:["Don't have an account?"," ",e.jsx(c,{href:"/register",className:"text-primary hover:underline",children:"Sign up"})]})]})]})})]})};export{U as default};
