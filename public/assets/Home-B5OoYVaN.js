import{a as c,j as e,c as p,u as b}from"./vendor-BOJOR_z2.js";import{C as S}from"./CustomHelmet-CJEY1eBY.js";import{u as C,a as F,A as E,b as k,c as A,E as I,L}from"./index-BYuk7_JU.js";import{s as T,I as O,B as y,C as H,f as W}from"./contact-C28TQl3y.js";import{C as q,a as B,b as D}from"./CtaSection-CR2oTmhM.js";import{S as x}from"./skeleton-DTk9rcAT.js";import{J as $}from"./JobCard-ORdKAsNj.js";import"./index-BdQq_4o_.js";import"./badge-Dbv6MStK.js";const U=()=>{const[l,m]=c.useState(""),[,n]=C(),t=i=>{i.preventDefault(),n(`/jobs?q=${encodeURIComponent(l)}`)};return e.jsxs("section",{className:"relative bg-[#2A4365] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-15",children:e.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.25' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsx("div",{className:"container mx-auto px-4 py-12 md:py-16 relative z-10",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center mb-8 md:mb-10",children:[e.jsxs("div",{className:"mb-6 md:mb-0 md:mr-10",children:[e.jsx("img",{src:"/images/hero-logo.png",alt:"WorkWise SA Hard Hat Logo",className:"w-32 h-32 md:w-48 md:h-48"}),e.jsxs("div",{className:"text-yellow-300 text-center font-bold mt-2 text-xl md:text-2xl",children:["WORK",e.jsx("span",{className:"text-white",children:"WISE.SA"})]})]}),e.jsxs("div",{className:"text-center md:text-left md:self-end",children:[e.jsx("div",{className:"text-yellow-300 font-bold text-2xl md:text-3xl lg:text-4xl mb-3",children:"FIND THAT NEEDED JOB"}),e.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-tight tracking-tight",children:["IN SOUTH",e.jsx("br",{}),"AFRICA"]})]})]}),e.jsx("div",{className:"bg-white p-3 rounded-lg shadow-lg mx-auto w-full max-w-2xl mt-4",children:e.jsx("form",{onSubmit:t,children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"}),e.jsx(O,{type:"text",placeholder:"Search for jobs...",className:"w-full pl-10 pr-3 py-3 rounded-md border-0 shadow-none text-lg focus-visible:ring-0",value:l,onChange:i=>m(i.target.value)})]})}),e.jsx("div",{className:"sm:w-auto w-full",children:e.jsx(y,{type:"submit",className:"w-full md:w-auto bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-medium py-3 px-8 text-lg",children:"Search"})})]})})})]})})]})},M=()=>{const[l,m]=c.useState([]),[n,t]=c.useState(!0),{toast:i}=F();c.useEffect(()=>{try{const a=localStorage.getItem("jobFavorites");a&&m(JSON.parse(a))}catch(a){console.error("Error loading favorites from localStorage:",a),i({variant:"destructive",title:"Error loading favorites",description:"Your saved jobs could not be loaded"})}finally{t(!1)}},[i]),c.useEffect(()=>{if(!n)try{localStorage.setItem("jobFavorites",JSON.stringify(l))}catch(a){console.error("Error saving favorites to localStorage:",a),i({variant:"destructive",title:"Error saving favorites",description:"Your job could not be saved"})}},[l,n,i]);const g=c.useCallback(a=>{m(o=>o.includes(a)?o:[...o,a])},[]),h=c.useCallback(a=>{m(o=>o.filter(u=>u!==a))},[]),j=c.useCallback(a=>{m(o=>o.includes(a)?o.filter(u=>u!==a):[...o,a])},[]),r=c.useCallback(a=>l.includes(a),[l]);return{favorites:l,isLoading:n,addFavorite:g,removeFavorite:h,toggleFavorite:j,isFavorite:r}},P=({title:l="Featured Opportunities",subtitle:m="Discover top employment opportunities from leading companies in South Africa",maxDisplay:n=6,filter:t,className:i})=>{const{favorites:g,toggleFavorite:h}=M(),j=p.useMemo(()=>{const s=["/api/jobs"];return t!=null&&t.featured&&s.push("featured"),t!=null&&t.category&&s.push(`category=${t.category}`),t!=null&&t.location&&s.push(`location=${t.location}`),s},[t]),{data:r,isLoading:a,error:o}=b({queryKey:j,queryFn:async()=>{try{let s="/api/jobs/featured";const d=new URLSearchParams;t!=null&&t.category&&d.append("category",t.category),t!=null&&t.location&&d.append("location",t.location),t!=null&&t.featured&&d.append("featured","true");const v=d.toString();v&&(s+=`?${v}`);const f=await fetch(s);if(!f.ok)throw new Error("Failed to fetch jobs");return f.json()}catch(s){return console.error("Error fetching jobs:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},refetchOnWindowFocus:!1}),u=p.useMemo(()=>!(r!=null&&r.success)||!r.data?[]:r.data.map(s=>{const d={id:s.id,name:s.company,logo:s.companyLogo,location:s.location,slug:s.company.toLowerCase().replace(/\\s+/g,"-"),openPositions:1};return{id:s.id,title:s.title,description:s.description,location:s.location,salary:s.salary,jobType:s.type,workMode:"On-site",companyId:s.id,categoryId:1,isFeatured:s.isFeatured,createdAt:new Date(s.postedDate),requirements:s.requirements,company:d}}).slice(0,n),[r,n]),w=c.useCallback((s,d)=>{h(s)},[h]),N=c.useCallback(()=>Array(n).fill(0).map((s,d)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-card overflow-hidden","data-testid":"job-skeleton",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"w-12 h-12 rounded-md mr-3"}),e.jsxs("div",{children:[e.jsx(x,{className:"h-5 w-40 mb-2"}),e.jsx(x,{className:"h-4 w-32"})]})]}),e.jsx(x,{className:"h-8 w-8 rounded-full"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{className:"h-5 w-16 rounded-full"}),e.jsx(x,{className:"h-5 w-16 rounded-full"})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(x,{className:"h-5 w-24"}),e.jsx(x,{className:"h-4 w-20"})]})]})]},d)),[n]);return o||(r==null?void 0:r.success)===!1?e.jsx("section",{className:"py-10 md:py-16 bg-light",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(E,{variant:"destructive",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx(k,{children:"Error"}),e.jsx(A,{children:(r==null?void 0:r.error)||"Failed to load jobs. Please try again later."})]})})}):e.jsx("section",{className:`py-10 md:py-16 bg-light ${i||""}`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-10",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:l}),e.jsx("p",{className:"text-muted",children:m})]}),e.jsx(I,{children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6","data-testid":"jobs-grid",children:a?N():u.length>0?u.map(s=>e.jsx($,{job:s,initialFavoriteState:g.includes(s.id),onFavoriteToggle:w},s.id)):e.jsx("div",{className:"col-span-full text-center py-10",children:e.jsx("p",{className:"text-muted",children:"No jobs found matching your criteria."})})})}),e.jsx("div",{className:"text-center mt-10",children:e.jsx(y,{variant:"outline",asChild:!0,className:"inline-flex items-center justify-center border-primary text-primary hover:bg-primary hover:text-white transition-colors",children:e.jsxs(L,{href:"/jobs",children:["Browse All Jobs ",e.jsx(W,{className:"ml-2 h-4 w-4"})]})})})]})})},Z=()=>e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"WorkWise SA - Find Essential Jobs in South Africa",description:"Find cashier, general worker, security, petrol attendant, domestic worker, cleaner, and landscaping jobs across South Africa."}),e.jsxs("main",{className:"flex-grow",children:[e.jsx(U,{}),e.jsx(q,{}),e.jsx(P,{}),e.jsx(B,{}),e.jsx(D,{})]})]});export{Z as default};
