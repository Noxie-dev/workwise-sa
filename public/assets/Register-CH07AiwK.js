var Ki=Object.defineProperty;var Xi=(t,e,r)=>e in t?Ki(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>Xi(t,typeof e!="symbol"?e+"":e,r);import{j as a}from"./vendor-ui-s4VaHhe3.js";import{b as Ri}from"./vendor-react-BLR_YkO_.js";import{H as Ji}from"./Helmet-0wtNoWcg.js";import{u as Wi,L as J}from"./vendor-router-B3zuYAIM.js";import{F as Hi,a as V,b as L,c as z,d as q,e as M,t as Yi}from"./form-DscTub4z.js";import{z as j,u as Zi}from"./vendor-forms-BbWomOe6.js";import{C as ki,b as eo,c as to,d as ro,a as no,e as so}from"./card-8UZPBAHq.js";import{u as io,f as oo,B as ce,h as ao,g as lo}from"./index-9094wa89.js";import{I as U}from"./input-IlxudZmX.js";import{C as de}from"./checkbox-B6HXUg6f.js";import"./vendor-charts-CaNT0DhE.js";import"./label-Bf6ViPYU.js";import"./vendor-query-Cm3gWw8b.js";import"./vendor-icons-CgtSIdDt.js";const i=Symbol.for("drizzle:entityKind");function _(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,i))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(i in r&&r[i]===e[i])return!0;r=Object.getPrototypeOf(r)}return!1}var Ne;Ne=i;class K{constructor(e,r){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(K,Ne,"Column");var xe;xe=i;class rs{constructor(e,r,n){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(rs,xe,"ColumnBuilder");const O=Symbol.for("drizzle:Name");var we;we=i;class ns{constructor(e,r){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:o,foreignColumns:l}=e();return{name:n,columns:o,foreignTable:l[0].table,foreignColumns:l}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ss(e,this)}}s(ns,we,"PgForeignKeyBuilder");var Se;Se=i;class ss{constructor(e,r){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),o=r.map(h=>h.name),l=n.map(h=>h.name),m=[this.table[O],...o,n[0].table[O],...l];return e??`${m.join("_")}_fk`}}s(ss,Se,"PgForeignKey");function uo(t,...e){return t(...e)}function co(t,e){return`${t[O]}_${e.join("_")}_unique`}function me(t,e,r){for(let n=e;n<t.length;n++){const o=t[n];if(o==="\\"){n++;continue}if(o==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(o===","||o==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function is(t,e=0){const r=[];let n=e,o=!1;for(;n<t.length;){const l=t[n];if(l===","){(o||n===e)&&r.push(""),o=!0,n++;continue}if(o=!1,l==="\\"){n+=2;continue}if(l==='"'){const[c,g]=me(t,n+1,!0);r.push(c),n=g;continue}if(l==="}")return[r,n+1];if(l==="{"){const[c,g]=is(t,n+1);r.push(c),n=g;continue}const[m,h]=me(t,n,!1);r.push(m),n=h}return[r,n]}function mo(t){const[e]=is(t,1);return e}function os(t){return`{${t.map(e=>Array.isArray(e)?os(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Te,Pe;class f extends(Pe=rs,Te=i,Pe){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(r){return new ls(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:o,actions:l})=>uo((m,h)=>{const c=new ns(()=>{const g=m();return{columns:[r],foreignColumns:[g]}});return h.onUpdate&&c.onUpdate(h.onUpdate),h.onDelete&&c.onDelete(h.onDelete),c.build(n)},o,l))}buildExtraConfigColumn(r){return new as(r,this.config)}}s(f,Te,"PgColumnBuilder");var Ie,_e;class p extends(_e=K,Ie=i,_e){constructor(e,r){r.uniqueName||(r.uniqueName=co(e,[r.name])),super(e,r),this.table=e}}s(p,Ie,"PgColumn");var je,Ce;class as extends(Ce=p,je=i,Ce){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}s(as,je,"ExtraConfigColumn");var ve,De;class ls extends(De=f,ve=i,De){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new ie(e,this.config,r)}}s(ls,ve,"PgArrayBuilder");var Ae,Fe;const ee=class ee extends(Fe=p,Ae=i,Fe){constructor(r,n,o,l){super(r,n);s(this,"size");this.baseColumn=o,this.range=l,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=mo(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const o=r.map(l=>l===null?null:_(this.baseColumn,ee)?this.baseColumn.mapToDriverValue(l,!0):this.baseColumn.mapToDriverValue(l));return n?o:os(o)}};s(ee,Ae,"PgArray");let ie=ee;const pe=Symbol.for("drizzle:isPgEnum");function po(t){return!!t&&typeof t=="function"&&pe in t&&t[pe]===!0}var Be;Be=i;class ae{constructor(e,r,n,o=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:o}}}s(ae,Be,"Subquery");const go={startActiveSpan(t,e){return e()}},G=Symbol.for("drizzle:ViewBaseConfig"),re=Symbol.for("drizzle:Schema"),ge=Symbol.for("drizzle:Columns"),fe=Symbol.for("drizzle:ExtraConfigColumns"),ne=Symbol.for("drizzle:OriginalName"),se=Symbol.for("drizzle:BaseName"),W=Symbol.for("drizzle:IsAlias"),he=Symbol.for("drizzle:ExtraConfigBuilder"),us=Symbol.for("drizzle:IsDrizzleTable");var Ve,Le,ze,qe,Me,Qe,Ue,Ee,$e,Oe;Oe=i,$e=O,Ee=ne,Ue=re,Qe=ge,Me=fe,qe=se,ze=W,Le=us,Ve=he;class v{constructor(e,r,n){s(this,$e);s(this,Ee);s(this,Ue);s(this,Qe);s(this,Me);s(this,qe);s(this,ze,!1);s(this,Le,!0);s(this,Ve);this[O]=this[ne]=e,this[re]=r,this[se]=n}}s(v,Oe,"Table"),s(v,"Symbol",{Name:O,Schema:re,OriginalName:ne,Columns:ge,ExtraConfigColumns:fe,BaseName:se,IsAlias:W,ExtraConfigBuilder:he});function cs(t){return typeof t=="object"&&t!==null&&us in t}function fo(t){return t!=null&&typeof t.getSQL=="function"}function ho(t){var r;const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),(r=n.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Ge;Ge=i;class F{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new S([this])}}s(F,Ge,"StringChunk");var Ke;Ke=i;const E=class E{constructor(e){s(this,"decoder",ds);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return go.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:o,escapeName:l,escapeParam:m,prepareTyping:h,inlineParams:c,paramStartIndex:g}=n;return ho(e.map(u=>{var T;if(_(u,F))return{sql:u.value.join(""),params:[]};if(_(u,H))return{sql:l(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const y=[new F("(")];for(const[P,Gi]of u.entries())y.push(Gi),P<u.length-1&&y.push(new F(", "));return y.push(new F(")")),this.buildQueryFromSourceParams(y,n)}if(_(u,E))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:c||u.shouldInlineParams});if(_(u,v)){const y=u[v.Symbol.Schema],P=u[v.Symbol.Name];return{sql:y===void 0||u[W]?l(P):l(y)+"."+l(P),params:[]}}if(_(u,K)){const y=o.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:l(y),params:[]};const P=u.table[v.Symbol.Schema];return{sql:u.table[W]||P===void 0?l(u.table[v.Symbol.Name])+"."+l(y):l(P)+"."+l(u.table[v.Symbol.Name])+"."+l(y),params:[]}}if(_(u,gs)){const y=u[G].schema,P=u[G].name;return{sql:y===void 0||u[G].isAlias?l(P):l(y)+"."+l(P),params:[]}}if(_(u,le)){if(_(u.value,Z))return{sql:m(g.value++,u),params:[u],typings:["none"]};const y=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(_(y,E))return this.buildQueryFromSourceParams([y],n);if(c)return{sql:this.mapInlineParam(y,n),params:[]};let P=["none"];return h&&(P=[h(u.encoder)]),{sql:m(g.value++,y),params:[y],typings:P}}return _(u,Z)?{sql:m(g.value++,u),params:[u],typings:["none"]}:_(u,E.Aliased)&&u.fieldAlias!==void 0?{sql:l(u.fieldAlias),params:[]}:_(u,ae)?u._.isWith?{sql:l(u._.alias),params:[]}:this.buildQueryFromSourceParams([new F("("),u._.sql,new F(") "),new H(u._.alias)],n):po(u)?u.schema?{sql:l(u.schema)+"."+l(u.enumName),params:[]}:{sql:l(u.enumName),params:[]}:fo(u)?(T=u.shouldOmitSQLParens)!=null&&T.call(u)?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new F("("),u.getSQL(),new F(")")],n):c?{sql:this.mapInlineParam(u,n),params:[]}:{sql:m(g.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new E.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(E,Ke,"SQL");let S=E;var Xe;Xe=i;class H{constructor(e){s(this,"brand");this.value=e}getSQL(){return new S([this])}}s(H,Xe,"Name");const ds={mapFromDriverValue:t=>t},ms={mapToDriverValue:t=>t};({...ds,...ms});var Re;Re=i;class le{constructor(e,r=ms){s(this,"brand");this.value=e,this.encoder=r}getSQL(){return new S([this])}}s(le,Re,"Param");function Y(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new F(t[0]));for(const[n,o]of e.entries())r.push(o,new F(t[n+1]));return new S(r)}(t=>{function e(){return new S([])}t.empty=e;function r(c){return new S(c)}t.fromList=r;function n(c){return new S([new F(c)])}t.raw=n;function o(c,g){const u=[];for(const[T,y]of c.entries())T>0&&g!==void 0&&u.push(g),u.push(y);return new S(u)}t.join=o;function l(c){return new H(c)}t.identifier=l;function m(c){return new Z(c)}t.placeholder=m;function h(c,g){return new le(c,g)}t.param=h})(Y||(Y={}));(t=>{var r;r=i;const n=class n{constructor(l,m){s(this,"isSelectionField",!1);this.sql=l,this.fieldAlias=m}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};s(n,r,"SQL.Aliased");let e=n;t.Aliased=e})(S||(S={}));var Je;Je=i;class Z{constructor(e){this.name=e}getSQL(){return new S([this])}}s(Z,Je,"Placeholder");const ps=Symbol.for("drizzle:IsDrizzleView");var We,He,Ye;Ye=i,He=G,We=ps;class gs{constructor({name:e,schema:r,selectedFields:n,query:o}){s(this,He);s(this,We,!0);this[G]={name:e,originalName:e,schema:r,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new S([this])}}s(gs,Ye,"View");function yo(t){return typeof t=="object"&&t!==null&&ps in t}K.prototype.getSQL=function(){return new S([this])};v.prototype.getSQL=function(){return new S([this])};ae.prototype.getSQL=function(){return new S([this])};function bo(t){return t[v.Symbol.Columns]}function No(t){return t[G].selectedFields}function I(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Ze,ke;class R extends(ke=f,Ze=i,ke){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(R,Ze,"PgIntColumnBaseBuilder");var et,tt;class fs extends(tt=R,et=i,tt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new hs(e,this.config)}}s(fs,et,"PgBigInt53Builder");var rt,nt;class hs extends(nt=p,rt=i,nt){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(hs,rt,"PgBigInt53");var st,it;class ys extends(it=R,st=i,it){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new bs(e,this.config)}}s(ys,st,"PgBigInt64Builder");var ot,at;class bs extends(at=p,ot=i,at){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(bs,ot,"PgBigInt64");function xo(t,e){const{name:r,config:n}=I(t,e);return n.mode==="number"?new fs(r):new ys(r)}var lt,ut;class Ns extends(ut=f,lt=i,ut){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new xs(e,this.config)}}s(Ns,lt,"PgBigSerial53Builder");var ct,dt;class xs extends(dt=p,ct=i,dt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(xs,ct,"PgBigSerial53");var mt,pt;class ws extends(pt=f,mt=i,pt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Ss(e,this.config)}}s(ws,mt,"PgBigSerial64Builder");var gt,ft;class Ss extends(ft=p,gt=i,ft){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(Ss,gt,"PgBigSerial64");function wo(t,e){const{name:r,config:n}=I(t,e);return n.mode==="number"?new Ns(r):new ws(r)}var ht,yt;class Ts extends(yt=f,ht=i,yt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Ps(e,this.config)}}s(Ts,ht,"PgBooleanBuilder");var bt,Nt;class Ps extends(Nt=p,bt=i,Nt){getSQLType(){return"boolean"}}s(Ps,bt,"PgBoolean");function Q(t){return new Ts(t??"")}var xt,wt;class Is extends(wt=f,xt=i,wt){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new _s(e,this.config)}}s(Is,xt,"PgCharBuilder");var St,Tt;class _s extends(Tt=p,St=i,Tt){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(_s,St,"PgChar");function So(t,e={}){const{name:r,config:n}=I(t,e);return new Is(r,n)}var Pt,It;class js extends(It=f,Pt=i,It){constructor(e){super(e,"string","PgCidr")}build(e){return new Cs(e,this.config)}}s(js,Pt,"PgCidrBuilder");var _t,jt;class Cs extends(jt=p,_t=i,jt){getSQLType(){return"cidr"}}s(Cs,_t,"PgCidr");function To(t){return new js(t??"")}var Ct,vt;class vs extends(vt=f,Ct=i,vt){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Ds(e,this.config)}}s(vs,Ct,"PgCustomColumnBuilder");var Dt,At;class Ds extends(At=p,Dt=i,At){constructor(r,n){super(r,n);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}s(Ds,Dt,"PgCustomColumn");function Po(t){return(e,r)=>{const{name:n,config:o}=I(e,r);return new vs(n,o,t)}}var Ft,Bt;class X extends(Bt=f,Ft=i,Bt){defaultNow(){return this.default(Y`now()`)}}s(X,Ft,"PgDateColumnBaseBuilder");var Vt,Lt;class As extends(Lt=X,Vt=i,Lt){constructor(e){super(e,"date","PgDate")}build(e){return new Fs(e,this.config)}}s(As,Vt,"PgDateBuilder");var zt,qt;class Fs extends(qt=p,zt=i,qt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Fs,zt,"PgDate");var Mt,Qt;class Bs extends(Qt=X,Mt=i,Qt){constructor(e){super(e,"string","PgDateString")}build(e){return new Vs(e,this.config)}}s(Bs,Mt,"PgDateStringBuilder");var Ut,Et;class Vs extends(Et=p,Ut=i,Et){getSQLType(){return"date"}}s(Vs,Ut,"PgDateString");function Io(t,e){const{name:r,config:n}=I(t,e);return(n==null?void 0:n.mode)==="date"?new As(r):new Bs(r)}var $t,Ot;class Ls extends(Ot=f,$t=i,Ot){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new zs(e,this.config)}}s(Ls,$t,"PgDoublePrecisionBuilder");var Gt,Kt;class zs extends(Kt=p,Gt=i,Kt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(zs,Gt,"PgDoublePrecision");function _o(t){return new Ls(t??"")}var Xt,Rt;class qs extends(Rt=f,Xt=i,Rt){constructor(e){super(e,"string","PgInet")}build(e){return new Ms(e,this.config)}}s(qs,Xt,"PgInetBuilder");var Jt,Wt;class Ms extends(Wt=p,Jt=i,Wt){getSQLType(){return"inet"}}s(Ms,Jt,"PgInet");function jo(t){return new qs(t??"")}var Ht,Yt;class Qs extends(Yt=R,Ht=i,Yt){constructor(e){super(e,"number","PgInteger")}build(e){return new Us(e,this.config)}}s(Qs,Ht,"PgIntegerBuilder");var Zt,kt;class Us extends(kt=p,Zt=i,kt){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(Us,Zt,"PgInteger");function N(t){return new Qs(t??"")}var er,tr;class Es extends(tr=f,er=i,tr){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new $s(e,this.config)}}s(Es,er,"PgIntervalBuilder");var rr,nr;class $s extends(nr=p,rr=i,nr){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}s($s,rr,"PgInterval");function Co(t,e={}){const{name:r,config:n}=I(t,e);return new Es(r,n)}var sr,ir;class Os extends(ir=f,sr=i,ir){constructor(e){super(e,"json","PgJson")}build(e){return new Gs(e,this.config)}}s(Os,sr,"PgJsonBuilder");var or,ar;class Gs extends(ar=p,or=i,ar){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Gs,or,"PgJson");function vo(t){return new Os(t??"")}var lr,ur;class Ks extends(ur=f,lr=i,ur){constructor(e){super(e,"json","PgJsonb")}build(e){return new Xs(e,this.config)}}s(Ks,lr,"PgJsonbBuilder");var cr,dr;class Xs extends(dr=p,cr=i,dr){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Xs,cr,"PgJsonb");function A(t){return new Ks(t??"")}var mr,pr;class Rs extends(pr=f,mr=i,pr){constructor(e){super(e,"array","PgLine")}build(e){return new Js(e,this.config)}}s(Rs,mr,"PgLineBuilder");var gr,fr;class Js extends(fr=p,gr=i,fr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(Js,gr,"PgLine");var hr,yr;class Ws extends(yr=f,hr=i,yr){constructor(e){super(e,"json","PgLineABC")}build(e){return new Hs(e,this.config)}}s(Ws,hr,"PgLineABCBuilder");var br,Nr;class Hs extends(Nr=p,br=i,Nr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(Hs,br,"PgLineABC");function Do(t,e){const{name:r,config:n}=I(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Rs(r):new Ws(r)}var xr,wr;class Ys extends(wr=f,xr=i,wr){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Zs(e,this.config)}}s(Ys,xr,"PgMacaddrBuilder");var Sr,Tr;class Zs extends(Tr=p,Sr=i,Tr){getSQLType(){return"macaddr"}}s(Zs,Sr,"PgMacaddr");function Ao(t){return new Ys(t??"")}var Pr,Ir;class ks extends(Ir=f,Pr=i,Ir){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ei(e,this.config)}}s(ks,Pr,"PgMacaddr8Builder");var _r,jr;class ei extends(jr=p,_r=i,jr){getSQLType(){return"macaddr8"}}s(ei,_r,"PgMacaddr8");function Fo(t){return new ks(t??"")}var Cr,vr;class ti extends(vr=f,Cr=i,vr){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new ri(e,this.config)}}s(ti,Cr,"PgNumericBuilder");var Dr,Ar;class ri extends(Ar=p,Dr=i,Ar){constructor(r,n){super(r,n);s(this,"precision");s(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(ri,Dr,"PgNumeric");function Bo(t,e){const{name:r,config:n}=I(t,e);return new ti(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}var Fr,Br;class ni extends(Br=f,Fr=i,Br){constructor(e){super(e,"array","PgPointTuple")}build(e){return new si(e,this.config)}}s(ni,Fr,"PgPointTupleBuilder");var Vr,Lr;class si extends(Lr=p,Vr=i,Lr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(si,Vr,"PgPointTuple");var zr,qr;class ii extends(qr=f,zr=i,qr){constructor(e){super(e,"json","PgPointObject")}build(e){return new oi(e,this.config)}}s(ii,zr,"PgPointObjectBuilder");var Mr,Qr;class oi extends(Qr=p,Mr=i,Qr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(oi,Mr,"PgPointObject");function Vo(t,e){const{name:r,config:n}=I(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new ni(r):new ii(r)}function Lo(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function ye(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let o=0;o<8;o++)n.setUint8(o,t[e+o]);return n.getFloat64(0,!0)}function ai(t){const e=Lo(t);let r=0;const n=e[r];r+=1;const o=new DataView(e.buffer),l=o.getUint32(r,n===1);if(r+=4,l&536870912&&(o.getUint32(r,n===1),r+=4),(l&65535)===1){const m=ye(e,r);r+=8;const h=ye(e,r);return r+=8,[m,h]}throw new Error("Unsupported geometry type")}var Ur,Er;class li extends(Er=f,Ur=i,Er){constructor(e){super(e,"array","PgGeometry")}build(e){return new ui(e,this.config)}}s(li,Ur,"PgGeometryBuilder");var $r,Or;class ui extends(Or=p,$r=i,Or){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ai(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(ui,$r,"PgGeometry");var Gr,Kr;class ci extends(Kr=f,Gr=i,Kr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new di(e,this.config)}}s(ci,Gr,"PgGeometryObjectBuilder");var Xr,Rr;class di extends(Rr=p,Xr=i,Rr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=ai(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(di,Xr,"PgGeometryObject");function zo(t,e){const{name:r,config:n}=I(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new li(r):new ci(r)}var Jr,Wr;class mi extends(Wr=f,Jr=i,Wr){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new pi(e,this.config)}}s(mi,Jr,"PgRealBuilder");var Hr,Yr;class pi extends(Yr=p,Hr=i,Yr){constructor(r,n){super(r,n);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}s(pi,Hr,"PgReal");function qo(t){return new mi(t??"")}var Zr,kr;class gi extends(kr=f,Zr=i,kr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new fi(e,this.config)}}s(gi,Zr,"PgSerialBuilder");var en,tn;class fi extends(tn=p,en=i,tn){getSQLType(){return"serial"}}s(fi,en,"PgSerial");function C(t){return new gi(t??"")}var rn,nn;class hi extends(nn=R,rn=i,nn){constructor(e){super(e,"number","PgSmallInt")}build(e){return new yi(e,this.config)}}s(hi,rn,"PgSmallIntBuilder");var sn,on;class yi extends(on=p,sn=i,on){constructor(){super(...arguments);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}s(yi,sn,"PgSmallInt");function Mo(t){return new hi(t??"")}var an,ln;class bi extends(ln=f,an=i,ln){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ni(e,this.config)}}s(bi,an,"PgSmallSerialBuilder");var un,cn;class Ni extends(cn=p,un=i,cn){getSQLType(){return"smallserial"}}s(Ni,un,"PgSmallSerial");function Qo(t){return new bi(t??"")}var dn,mn;class xi extends(mn=f,dn=i,mn){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new wi(e,this.config)}}s(xi,dn,"PgTextBuilder");var pn,gn;class wi extends(gn=p,pn=i,gn){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(wi,pn,"PgText");function d(t,e={}){const{name:r,config:n}=I(t,e);return new xi(r,n)}var fn,hn;class Si extends(hn=X,fn=i,hn){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new Ti(e,this.config)}}s(Si,fn,"PgTimeBuilder");var yn,bn;class Ti extends(bn=p,yn=i,bn){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Ti,yn,"PgTime");function Uo(t,e={}){const{name:r,config:n}=I(t,e);return new Si(r,n.withTimezone??!1,n.precision)}var Nn,xn;class Pi extends(xn=X,Nn=i,xn){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Ii(e,this.config)}}s(Pi,Nn,"PgTimestampBuilder");var wn,Sn;class Ii extends(Sn=p,wn=i,Sn){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));s(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Ii,wn,"PgTimestamp");var Tn,Pn;class _i extends(Pn=X,Tn=i,Pn){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new ji(e,this.config)}}s(_i,Tn,"PgTimestampStringBuilder");var In,_n;class ji extends(_n=p,In=i,_n){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(ji,In,"PgTimestampString");function w(t,e={}){const{name:r,config:n}=I(t,e);return(n==null?void 0:n.mode)==="string"?new _i(r,n.withTimezone??!1,n.precision):new Pi(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var jn,Cn;class Ci extends(Cn=f,jn=i,Cn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Y`gen_random_uuid()`)}build(e){return new vi(e,this.config)}}s(Ci,jn,"PgUUIDBuilder");var vn,Dn;class vi extends(Dn=p,vn=i,Dn){getSQLType(){return"uuid"}}s(vi,vn,"PgUUID");function Eo(t){return new Ci(t??"")}var An,Fn;class Di extends(Fn=f,An=i,Fn){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Ai(e,this.config)}}s(Di,An,"PgVarcharBuilder");var Bn,Vn;class Ai extends(Vn=p,Bn=i,Vn){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(Ai,Bn,"PgVarchar");function $o(t,e={}){const{name:r,config:n}=I(t,e);return new Di(r,n)}var Ln,zn;class Fi extends(zn=f,Ln=i,zn){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Bi(e,this.config)}}s(Fi,Ln,"PgBinaryVectorBuilder");var qn,Mn;class Bi extends(Mn=p,qn=i,Mn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Bi,qn,"PgBinaryVector");function Oo(t,e){const{name:r,config:n}=I(t,e);return new Fi(r,n)}var Qn,Un;class Vi extends(Un=f,Qn=i,Un){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Li(e,this.config)}}s(Vi,Qn,"PgHalfVectorBuilder");var En,$n;class Li extends($n=p,En=i,$n){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(Li,En,"PgHalfVector");function Go(t,e){const{name:r,config:n}=I(t,e);return new Vi(r,n)}var On,Gn;class zi extends(Gn=f,On=i,Gn){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new qi(e,this.config)}}s(zi,On,"PgSparseVectorBuilder");var Kn,Xn;class qi extends(Xn=p,Kn=i,Xn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(qi,Kn,"PgSparseVector");function Ko(t,e){const{name:r,config:n}=I(t,e);return new zi(r,n)}var Rn,Jn;class Mi extends(Jn=f,Rn=i,Jn){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Qi(e,this.config)}}s(Mi,Rn,"PgVectorBuilder");var Wn,Hn;class Qi extends(Hn=p,Wn=i,Hn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(Qi,Wn,"PgVector");function Xo(t,e){const{name:r,config:n}=I(t,e);return new Mi(r,n)}function Ro(){return{bigint:xo,bigserial:wo,boolean:Q,char:So,cidr:To,customType:Po,date:Io,doublePrecision:_o,inet:jo,integer:N,interval:Co,json:vo,jsonb:A,line:Do,macaddr:Ao,macaddr8:Fo,numeric:Bo,point:Vo,geometry:zo,real:qo,serial:C,smallint:Mo,smallserial:Qo,text:d,time:Uo,timestamp:w,uuid:Eo,varchar:$o,bit:Oo,halfvec:Go,sparsevec:Ko,vector:Xo}}const oe=Symbol.for("drizzle:PgInlineForeignKeys"),be=Symbol.for("drizzle:EnableRLS");var Yn,Zn,kn,es,ts;class k extends(ts=v,es=i,kn=oe,Zn=be,Yn=v.Symbol.ExtraConfigBuilder,ts){constructor(){super(...arguments);s(this,kn,[]);s(this,Zn,!1);s(this,Yn)}}s(k,es,"PgTable"),s(k,"Symbol",Object.assign({},v.Symbol,{InlineForeignKeys:oe,EnableRLS:be}));function Jo(t,e,r,n,o=t){const l=new k(t,n,o),m=typeof e=="function"?e(Ro()):e,h=Object.fromEntries(Object.entries(m).map(([u,T])=>{const y=T;y.setName(u);const P=y.build(l);return l[oe].push(...y.buildForeignKeys(P,l)),[u,P]})),c=Object.fromEntries(Object.entries(m).map(([u,T])=>{const y=T;y.setName(u);const P=y.buildExtraConfigColumn(l);return[u,P]})),g=Object.assign(l,h);return g[v.Symbol.Columns]=h,g[v.Symbol.ExtraConfigColumns]=c,Object.assign(g,{enableRLS:()=>(g[k.Symbol.EnableRLS]=!0,g)})}const D=(t,e,r)=>Jo(t,e,r,void 0),b={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function x(t,e){return e.includes(t.columnType)}function Wo(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Ho=j.union([j.string(),j.number(),j.boolean(),j.null()]),Yo=j.union([Ho,j.record(j.any()),j.array(j.any())]),Zo=j.custom(t=>t instanceof Buffer);function Ui(t,e){const r=(e==null?void 0:e.zodInstance)??j,n=(e==null?void 0:e.coerce)??{};let o;return Wo(t)&&(o=t.enumValues.length?r.enum(t.enumValues):r.string()),o||(x(t,["PgGeometry","PgPointTuple"])?o=r.tuple([r.number(),r.number()]):x(t,["PgGeometryObject","PgPointObject"])?o=r.object({x:r.number(),y:r.number()}):x(t,["PgHalfVector","PgVector"])?(o=r.array(r.number()),o=t.dimensions?o.length(t.dimensions):o):x(t,["PgLine"])?o=r.tuple([r.number(),r.number(),r.number()]):x(t,["PgLineABC"])?o=r.object({a:r.number(),b:r.number(),c:r.number()}):x(t,["PgArray"])?(o=r.array(Ui(t.baseColumn,r)),o=t.size?o.length(t.size):o):t.dataType==="array"?o=r.array(r.any()):t.dataType==="number"?o=ko(t,r,n):t.dataType==="bigint"?o=ea(t,r,n):t.dataType==="boolean"?o=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?o=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?o=ta(t,r,n):t.dataType==="json"?o=Yo:t.dataType==="custom"?o=r.any():t.dataType==="buffer"&&(o=Zo)),o||(o=r.any()),o}function ko(t,e,r){let n=t.getSQLType().includes("unsigned"),o,l,m=!1;x(t,["MySqlTinyInt","SingleStoreTinyInt"])?(o=n?0:b.INT8_MIN,l=n?b.INT8_UNSIGNED_MAX:b.INT8_MAX,m=!0):x(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(o=n?0:b.INT16_MIN,l=n?b.INT16_UNSIGNED_MAX:b.INT16_MAX,m=!0):x(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(o=n?0:b.INT24_MIN,l=n?b.INT24_UNSIGNED_MAX:b.INT24_MAX,m=x(t,["MySqlMediumInt","SingleStoreMediumInt"])):x(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(o=n?0:b.INT32_MIN,l=n?b.INT32_UNSIGNED_MAX:b.INT32_MAX,m=!0):x(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(o=n?0:b.INT48_MIN,l=n?b.INT48_UNSIGNED_MAX:b.INT48_MAX):x(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||x(t,["MySqlSerial","SingleStoreSerial"]),o=n?0:Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,m=!0):x(t,["MySqlYear","SingleStoreYear"])?(o=1901,l=2155,m=!0):(o=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER);let h=r===!0||r!=null&&r.number?e.coerce.number():e.number();return h=h.min(o).max(l),m?h.int():h}function ea(t,e,r){const n=t.getSQLType().includes("unsigned"),o=n?0n:b.INT64_MIN,l=n?b.INT64_UNSIGNED_MAX:b.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(o).max(l)}function ta(t,e,r){if(x(t,["PgUUID"]))return e.string().uuid();let n,o,l=!1;x(t,["PgVarchar","SQLiteText"])?n=t.length:x(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??b.INT16_UNSIGNED_MAX:x(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=b.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=b.INT24_UNSIGNED_MAX:t.textType==="text"?n=b.INT16_UNSIGNED_MAX:n=b.INT8_UNSIGNED_MAX),x(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,l=!0),x(t,["PgBinaryVector"])&&(o=/^[01]+$/,n=t.dimensions);let m=r===!0||r!=null&&r.string?e.coerce.string():e.string();return m=o?m.regex(o):m,n&&l?m.length(n):n?m.max(n):m}function Ei(t){return cs(t)?bo(t):No(t)}function $i(t,e,r,n){const o={};for(const[l,m]of Object.entries(t)){if(!_(m,K)&&!_(m,S)&&!_(m,S.Aliased)&&typeof m=="object"){const T=cs(m)||yo(m)?Ei(m):m;o[l]=$i(T,e[l]??{},r,n);continue}const h=e[l];if(h!==void 0&&typeof h!="function"){o[l]=h;continue}const c=_(m,K)?m:void 0,g=c?Ui(c,n):j.any(),u=typeof h=="function"?h(g):g;r.never(c)||(o[l]=u,c&&(r.nullable(c)&&(o[l]=o[l].nullable()),r.optional(c)&&(o[l]=o[l].optional())))}return j.object(o)}const ra={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},B=(t,e)=>{const r=Ei(t);return $i(r,{},ra)},na=D("wiseup_content",{id:C("id").primaryKey(),title:d("title").notNull(),creator:A("creator").notNull(),video:d("video").notNull(),description:d("description").notNull(),resources:A("resources"),tags:A("tags"),createdAt:w("created_at").defaultNow(),updatedAt:w("updated_at").defaultNow()});B(na).pick({title:!0,creator:!0,video:!0,description:!0,resources:!0,tags:!0});const sa=D("wiseup_ads",{id:C("id").primaryKey(),advertiser:d("advertiser").notNull(),title:d("title").notNull(),video:d("video").notNull(),cta:d("cta").notNull(),description:d("description").notNull(),notes:d("notes"),targetInterests:A("target_interests"),active:Q("active").default(!0),createdAt:w("created_at").defaultNow(),updatedAt:w("updated_at").defaultNow()});B(sa).pick({advertiser:!0,title:!0,video:!0,cta:!0,description:!0,notes:!0,targetInterests:!0,active:!0});const ia=D("wiseup_bookmarks",{id:C("id").primaryKey(),userId:d("user_id").notNull(),wiseUpItemId:d("wiseup_item_id").notNull(),itemType:d("item_type").notNull(),bookmarkedAt:w("bookmarked_at").defaultNow()});B(ia).pick({userId:!0,wiseUpItemId:!0,itemType:!0});const oa=D("wiseup_ad_impressions",{id:C("id").primaryKey(),adId:N("ad_id").notNull(),userId:d("user_id").notNull(),timestamp:w("timestamp").defaultNow(),platform:d("platform").default("web")});B(oa).pick({adId:!0,userId:!0,platform:!0});const aa=D("wiseup_user_progress",{id:C("id").primaryKey(),userId:d("user_id").notNull(),contentId:N("content_id").notNull(),progress:N("progress").default(0),completed:Q("completed").default(!1),lastWatched:w("last_watched").defaultNow()});B(aa).pick({userId:!0,contentId:!0,progress:!0,completed:!0});const $=D("users",{id:C("id").primaryKey(),username:d("username").notNull().unique(),password:d("password").notNull(),email:d("email").notNull().unique(),name:d("name").notNull(),location:d("location"),bio:d("bio"),phoneNumber:d("phone_number"),willingToRelocate:Q("willing_to_relocate").default(!1),preferences:A("preferences"),experience:A("experience"),education:A("education"),skills:A("skills"),lastActive:w("last_active"),engagementScore:N("engagement_score").default(0),notificationPreference:Q("notification_preference").default(!0),createdAt:w("created_at").defaultNow()}),la=B($).pick({username:!0,password:!0,email:!0,name:!0,location:!0,bio:!0,phoneNumber:!0,willingToRelocate:!0,notificationPreference:!0}),ue=D("categories",{id:C("id").primaryKey(),name:d("name").notNull(),icon:d("icon").notNull(),slug:d("slug").notNull().unique(),jobCount:N("job_count").default(0)});B(ue).pick({name:!0,icon:!0,slug:!0,jobCount:!0});const Oi=D("companies",{id:C("id").primaryKey(),name:d("name").notNull(),logo:d("logo"),location:d("location"),slug:d("slug").notNull().unique(),openPositions:N("open_positions").default(0)});B(Oi).pick({name:!0,logo:!0,location:!0,slug:!0,openPositions:!0});const te=D("jobs",{id:C("id").primaryKey(),title:d("title").notNull(),description:d("description").notNull(),location:d("location").notNull(),salary:d("salary"),jobType:d("job_type").notNull(),workMode:d("work_mode").notNull(),companyId:N("company_id").notNull().references(()=>Oi.id),categoryId:N("category_id").notNull().references(()=>ue.id),isFeatured:Q("is_featured").default(!1),createdAt:w("created_at").defaultNow()});B(te).pick({title:!0,description:!0,location:!0,salary:!0,jobType:!0,workMode:!0,companyId:!0,categoryId:!0,isFeatured:!0});D("user_sessions",{id:C("id").primaryKey(),userId:N("user_id").notNull().references(()=>$.id),startTime:w("start_time").notNull().defaultNow(),endTime:w("end_time"),duration:N("duration"),device:d("device"),ipAddress:d("ip_address")});D("user_interactions",{id:C("id").primaryKey(),userId:N("user_id").notNull().references(()=>$.id),interactionType:d("interaction_type").notNull(),interactionTime:w("interaction_time").notNull().defaultNow(),jobId:N("job_id").references(()=>te.id),videoId:d("video_id"),categoryId:N("category_id").references(()=>ue.id),duration:N("duration"),metadata:A("metadata")});D("job_applications",{id:C("id").primaryKey(),userId:N("user_id").notNull().references(()=>$.id),jobId:N("job_id").notNull().references(()=>te.id),status:d("status").notNull().default("applied"),appliedAt:w("applied_at").notNull().defaultNow(),updatedAt:w("updated_at").notNull().defaultNow(),resumeUrl:d("resume_url"),coverLetter:d("cover_letter"),notes:d("notes")});D("user_notifications",{id:C("id").primaryKey(),userId:N("user_id").notNull().references(()=>$.id),type:d("type").notNull(),content:d("content").notNull(),jobId:N("job_id").references(()=>te.id),isRead:Q("is_read").default(!1),createdAt:w("created_at").notNull().defaultNow(),sentAt:w("sent_at")});D("user_job_preferences",{id:C("id").primaryKey(),userId:N("user_id").notNull().references(()=>$.id).unique(),preferredCategories:A("preferred_categories"),preferredLocations:A("preferred_locations"),preferredJobTypes:A("preferred_job_types"),willingToRelocate:Q("willing_to_relocate").default(!1),minSalary:N("min_salary"),updatedAt:w("updated_at").notNull().defaultNow()});const ua=D("files",{id:C("id").primaryKey(),userId:N("user_id").references(()=>$.id),originalName:d("original_name").notNull(),storagePath:d("storage_path").notNull(),fileUrl:d("file_url").notNull(),mimeType:d("mime_type").notNull(),size:N("size").notNull(),fileType:d("file_type").notNull(),metadata:A("metadata"),createdAt:w("created_at").notNull().defaultNow(),updatedAt:w("updated_at").notNull().defaultNow()});B(ua).pick({userId:!0,originalName:!0,storagePath:!0,fileUrl:!0,mimeType:!0,size:!0,fileType:!0,metadata:!0});const ca=la.extend({confirmPassword:j.string().min(6,"Password must be at least 6 characters"),willingToRelocate:j.boolean().default(!1),agreeTerms:j.literal(!0,{errorMap:()=>({message:"You must agree to the terms and conditions"})})}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),_a=()=>{const[t,e]=Ri.useState(!1),{toast:r}=io(),[,n]=Wi(),{isAuthenticated:o}=oo();if(o)return n("/profile"),null;const l=Zi({resolver:Yi(ca),defaultValues:{username:"",email:"",name:"",password:"",confirmPassword:"",location:"",bio:"",willingToRelocate:!1,agreeTerms:!1}}),m=async()=>{e(!0);try{await lo(),n("/profile-setup")}catch(c){let g="Failed to sign in with Google. Please try again.";c.code==="auth/operation-not-allowed"?g="Google sign-in is not enabled. Please try another method or contact support.":c.code==="auth/popup-closed-by-user"?g="Sign-in popup was closed. Please try again.":c.code==="auth/cancelled-popup-request"?g="Multiple popup requests were made. Please try again.":c.code==="auth/popup-blocked"&&(g="Sign-in popup was blocked by your browser. Please allow popups for this site."),console.error("Google sign-in error:",c.code,c.message),r({variant:"destructive",title:"Registration Failed",description:g})}finally{e(!1)}},h=async c=>{e(!0);try{const{confirmPassword:g,agreeTerms:u,...T}=c,y=await ao(T.email,T.password,T.name);r({title:"Registration Successful",description:"Your account has been created. Now let's set up your profile."}),setTimeout(()=>{window.location.href="/profile-setup"},500)}catch(g){let u="Failed to create account. Please try again.",T=null;g.code==="auth/email-already-in-use"?(u="This email is already registered. Please try logging in instead.",T="/login"):g.code==="auth/weak-password"?u="The password is too weak. Please choose a stronger password.":g.code==="auth/invalid-email"?u="The email address is invalid. Please enter a valid email.":g.code==="auth/network-request-failed"?u="Network error. Please check your internet connection.":g.code==="auth/operation-not-allowed"&&(u="This sign-up method is not enabled. Please try another method."),console.error("Registration error:",g.code,g.message),r({variant:"destructive",title:"Registration Failed",description:a.jsxs("div",{children:[u,T&&a.jsx("div",{className:"mt-2",children:a.jsx(J,{href:T,className:"text-blue-500 hover:underline",children:"Go to login page"})})]})})}finally{e(!1)}};return a.jsxs(a.Fragment,{children:[a.jsxs(Ji,{children:[a.jsx("title",{children:"Register | WorkWise SA"}),a.jsx("meta",{name:"description",content:"Create a WorkWise SA account to apply for jobs, save your favorite listings, and get personalized job recommendations."})]}),a.jsx("main",{className:"flex-grow bg-light flex items-center justify-center py-10",children:a.jsxs(ki,{className:"w-full max-w-lg mx-4",children:[a.jsxs(eo,{className:"space-y-1",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:"/images/logo.png",alt:"WorkWise SA Logo",className:"h-36 md:h-40 object-contain transition-all duration-200 hover:scale-105"})}),a.jsx(to,{className:"text-2xl font-bold text-center",children:"Create an Account"}),a.jsx(ro,{className:"text-center",children:"Sign up to start exploring job opportunities"})]}),a.jsx(no,{children:a.jsx(Hi,{...l,children:a.jsxs("form",{onSubmit:l.handleSubmit(h),className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(V,{control:l.control,name:"name",render:({field:c})=>a.jsxs(L,{children:[a.jsx(z,{children:"Full Name"}),a.jsx(q,{children:a.jsx(U,{placeholder:"John Doe",...c})}),a.jsx(M,{})]})}),a.jsx(V,{control:l.control,name:"username",render:({field:c})=>a.jsxs(L,{children:[a.jsx(z,{children:"Username"}),a.jsx(q,{children:a.jsx(U,{placeholder:"johndoe",...c})}),a.jsx(M,{})]})})]}),a.jsx(V,{control:l.control,name:"email",render:({field:c})=>a.jsxs(L,{children:[a.jsx(z,{children:"Email"}),a.jsx(q,{children:a.jsx(U,{type:"email",placeholder:"john.doe@example.com",...c})}),a.jsx(M,{})]})}),a.jsx(V,{control:l.control,name:"location",render:({field:c})=>a.jsxs(L,{children:[a.jsx(z,{children:"Location"}),a.jsx(q,{children:a.jsx(U,{placeholder:"Cape Town, South Africa",...c})}),a.jsx(M,{})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(V,{control:l.control,name:"password",render:({field:c})=>a.jsxs(L,{children:[a.jsx(z,{children:"Password"}),a.jsx(q,{children:a.jsx(U,{type:"password",placeholder:"******",...c})}),a.jsx(M,{})]})}),a.jsx(V,{control:l.control,name:"confirmPassword",render:({field:c})=>a.jsxs(L,{children:[a.jsx(z,{children:"Confirm Password"}),a.jsx(q,{children:a.jsx(U,{type:"password",placeholder:"******",...c})}),a.jsx(M,{})]})})]}),a.jsx(V,{control:l.control,name:"bio",render:({field:c})=>a.jsxs(L,{children:[a.jsx(z,{children:"Short Bio (Optional)"}),a.jsx(q,{children:a.jsx(U,{placeholder:"Tell us about yourself",...c})}),a.jsx(M,{})]})}),a.jsx(V,{control:l.control,name:"willingToRelocate",render:({field:c})=>a.jsxs(L,{className:"flex items-start space-x-2 space-y-0",children:[a.jsx(q,{children:a.jsx(de,{checked:c.value,onCheckedChange:c.onChange})}),a.jsxs("div",{className:"space-y-1 leading-none",children:[a.jsx(z,{className:"text-sm font-normal cursor-pointer",children:"I am willing to relocate for work opportunities"}),a.jsx(M,{})]})]})}),a.jsx(V,{control:l.control,name:"agreeTerms",render:({field:c})=>a.jsxs(L,{className:"flex items-start space-x-2 space-y-0",children:[a.jsx(q,{children:a.jsx(de,{checked:c.value,onCheckedChange:c.onChange})}),a.jsxs("div",{className:"space-y-1 leading-none",children:[a.jsxs(z,{className:"text-sm font-normal cursor-pointer",children:["I agree to the ",a.jsx(J,{href:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," and ",a.jsx(J,{href:"/privacy-policy",className:"text-primary hover:underline",children:"Privacy Policy"})]}),a.jsx(M,{})]})]})}),a.jsx(ce,{type:"submit",className:"w-full bg-primary",disabled:t,children:t?"Creating account...":"Create Account"})]})})}),a.jsxs(so,{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative w-full",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-border"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-light px-2 text-muted",children:"Or continue with"})})]}),a.jsxs(ce,{variant:"outline",className:"w-full",onClick:m,disabled:t,type:"button",children:[a.jsx("i",{className:"fab fa-google mr-2"})," Google"]}),a.jsxs("p",{className:"text-center text-sm text-muted mt-4",children:["Already have an account?"," ",a.jsx(J,{href:"/login",className:"text-primary hover:underline",children:"Log in"})]})]})]})})]})};export{_a as default};
