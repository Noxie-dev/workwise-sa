import{j as e}from"./vendor-ui-s4VaHhe3.js";import{b as w}from"./vendor-react-BLR_YkO_.js";import{H as v}from"./Helmet-0wtNoWcg.js";import{u as N,L as c}from"./vendor-router-B3zuYAIM.js";import{F as k,a as d,b as m,c as p,d as u,e as h,t as C}from"./form-DscTub4z.js";import{u as F,z as i}from"./vendor-forms-BbWomOe6.js";import{C as L,b as S,c as P,d as I,a as E,e as W}from"./card-8UZPBAHq.js";import{u as M,f as G,B as g,s as q,g as A}from"./index-9094wa89.js";import{I as f}from"./input-IlxudZmX.js";import{C as H}from"./checkbox-B6HXUg6f.js";import"./vendor-charts-CaNT0DhE.js";import"./label-Bf6ViPYU.js";import"./vendor-query-Cm3gWw8b.js";import"./vendor-icons-CgtSIdDt.js";const T=i.object({email:i.string().email("Please enter a valid email address"),password:i.string().min(6,"Password must be at least 6 characters"),rememberMe:i.boolean().optional()}),$=()=>{const[l,t]=w.useState(!1),{toast:x}=M(),[,n]=N(),{isAuthenticated:j}=G(),a=F({resolver:C(T),defaultValues:{email:"",password:"",rememberMe:!1}});if(j)return n("/profile"),null;const y=async()=>{t(!0);try{await A(),n("/profile-setup")}catch(s){let r="Failed to sign in with Google. Please try again.";s.code==="auth/operation-not-allowed"?r="Google sign-in is not enabled. Please try another method or contact support.":s.code==="auth/popup-closed-by-user"?r="Sign-in popup was closed. Please try again.":s.code==="auth/cancelled-popup-request"?r="Multiple popup requests were made. Please try again.":s.code==="auth/popup-blocked"&&(r="Sign-in popup was blocked by your browser. Please allow popups for this site."),console.error("Google sign-in error:",s.code,s.message),x({variant:"destructive",title:"Login Failed",description:r})}finally{t(!1)}},b=async s=>{t(!0);try{await q(s.email,s.password),n("/profile-setup")}catch(r){let o="Invalid email or password. Please try again.";r.code==="auth/user-not-found"||r.code==="auth/wrong-password"?o="Invalid email or password. Please try again.":r.code==="auth/too-many-requests"?o="Too many unsuccessful login attempts. Please try again later.":r.code==="auth/network-request-failed"&&(o="Network error. Please check your internet connection."),x({variant:"destructive",title:"Login Failed",description:o})}finally{t(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx("title",{children:"Login | WorkWise SA"}),e.jsx("meta",{name:"description",content:"Login to your WorkWise SA account to access job applications, saved jobs, and profile settings."})]}),e.jsx("main",{className:"flex-grow bg-light flex items-center justify-center py-10",children:e.jsxs(L,{className:"w-full max-w-md mx-4",children:[e.jsxs(S,{className:"space-y-1",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/images/logo.png",alt:"WorkWise SA Logo",className:"h-36 md:h-40 object-contain transition-all duration-200 hover:scale-105"})}),e.jsx(P,{className:"text-2xl font-bold text-center",children:"Login"}),e.jsx(I,{className:"text-center",children:"Enter your credentials to access your account"})]}),e.jsx(E,{children:e.jsxs(k,{...a,children:[e.jsxs("form",{onSubmit:a.handleSubmit(b),className:"space-y-4",children:[e.jsx(d,{control:a.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(p,{children:"Email"}),e.jsx(u,{children:e.jsx(f,{type:"email",placeholder:"Enter your email",...s})}),e.jsx(h,{})]})}),e.jsx(d,{control:a.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(p,{children:"Password"}),e.jsx(u,{children:e.jsx(f,{type:"password",placeholder:"Enter your password",...s})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{control:a.control,name:"rememberMe",render:({field:s})=>e.jsxs(m,{className:"flex items-center space-x-2 space-y-0",children:[e.jsx(u,{children:e.jsx(H,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(p,{className:"text-sm font-normal cursor-pointer",children:"Remember me"})]})}),e.jsx(c,{href:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),e.jsx(g,{type:"submit",className:"w-full bg-primary",disabled:l,children:l?"Logging in...":"Login"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(c,{href:"/email-link-login",className:"text-sm text-primary hover:underline",children:"Sign in with email link (no password required)"})})]})}),e.jsxs(W,{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-light px-2 text-muted",children:"Or continue with"})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs(g,{variant:"outline",className:"w-full",onClick:y,disabled:l,children:[e.jsx("i",{className:"fab fa-google mr-2"})," Google"]})}),e.jsxs("p",{className:"text-center text-sm text-muted mt-4",children:["Don't have an account?"," ",e.jsx(c,{href:"/register",className:"text-primary hover:underline",children:"Sign up"})]})]})]})})]})};export{$ as default};
