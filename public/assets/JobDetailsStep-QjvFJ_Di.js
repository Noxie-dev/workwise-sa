import{j as e}from"./vendor-ui-s4VaHhe3.js";import{R as h,b as m}from"./vendor-react-BLR_YkO_.js";import{u as G}from"./vendor-query-Cm3gWw8b.js";import{f as U,a as z}from"./PostJob-8--Oe28z.js";import{F as g,T as K}from"./Textarea-NWNMmzce.js";import{I as j,S as w,a as D,b as S,c as A,d as L}from"./Select-o5Laohk0.js";import{B as f,L as k}from"./Button-DUkTpc71.js";import{r as I,i as R,v as Q,w as W}from"./vendor-icons-CgtSIdDt.js";import"./vendor-router-B3zuYAIM.js";import"./CustomHelmet-C_Zi0UWb.js";import"./index-9094wa89.js";import"./vendor-charts-CaNT0DhE.js";import"./alert-dialog-Cf5MS8R_.js";import"./card-8UZPBAHq.js";import"./checkbox-B6HXUg6f.js";import"./dialog-CIc8KdEJ.js";import"./input-IlxudZmX.js";import"./label-Bf6ViPYU.js";import"./progress-_Q1tFUEv.js";import"./select-aXx2Wv-A.js";import"./separator-Doa1ZjWc.js";import"./use-mobile-BasZxOCf.js";import"./skeleton-65i7iYhM.js";import"./switch-CZmy3i_B.js";import"./tabs-BM3G3Ofl.js";import"./textarea-Cql9auRd.js";const F=({id:i,checked:r,onCheckedChange:a,...t})=>e.jsx("input",{id:i,type:"checkbox",checked:r,onChange:l=>a(l.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...t}),X=({children:i,open:r,onOpenChange:a,className:t})=>r?e.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 ${t}`,onClick:()=>a(!1),children:i}):null,Z=({children:i,asChild:r,onClick:a})=>{if(r&&h.isValidElement(i)){const t=i.props.onClick;return h.cloneElement(i,{onClick:l=>{a==null||a(l),t==null||t(l)}})}return e.jsx("button",{type:"button",onClick:a,children:i})},_=({children:i,className:r})=>e.jsx("div",{className:`bg-white p-6 rounded-lg shadow-xl max-w-lg w-full mx-auto ${r}`,onClick:a=>a.stopPropagation(),children:i}),H=({children:i,className:r})=>e.jsx("h2",{className:`text-lg font-semibold text-gray-900 mb-2 ${r}`,children:i}),Y=({children:i,className:r})=>e.jsx("p",{className:`text-sm text-gray-600 mb-4 ${r}`,children:i}),ee=({children:i,className:r})=>e.jsx("div",{className:`mt-6 flex justify-end space-x-2 ${r}`,children:i}),ae=({children:i,defaultValue:r,className:a,onValueChange:t})=>{const[l,o]=m.useState(r),d=p=>{o(p),t&&t(p)};return e.jsx("div",{className:a,children:h.Children.map(i,p=>h.cloneElement(p,{activeTab:l,setActiveTab:d}))})},se=({children:i,className:r,activeTab:a,setActiveTab:t})=>e.jsx("div",{className:`flex border-b ${r}`,children:h.Children.map(i,l=>h.cloneElement(l,{activeTab:a,setActiveTab:t}))}),v=({children:i,value:r,activeTab:a,setActiveTab:t})=>e.jsx("button",{type:"button",onClick:()=>t(r),className:`px-4 py-2 -mb-px border-b-2 font-medium text-sm ${a===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:i}),N=({children:i,value:r,activeTab:a,className:t})=>a===r?e.jsx("div",{className:`py-4 ${t}`,children:i}):null,Ae=({formState:i,onInitiateAIAssist:r})=>{var M;const{values:a,errors:t,touched:l,handleChange:o,handleBlur:d}=i,[p,u]=m.useState([]),[B,C]=m.useState(!1),[E,y]=m.useState(!1),{data:x,isLoading:q,error:J}=G({queryKey:["jobCategories"],queryFn:z}),O=m.useMemo(()=>{let s;return n=>{if(clearTimeout(s),!n||n.length<2){u([]);return}C(!0),s=setTimeout(async()=>{try{const c=await U(n);u(c)}catch(c){console.error("Failed to fetch locations",c),u([])}finally{C(!1)}},500)}},[]),$=m.useMemo(()=>x?x.reduce((s,n)=>{const c=n.group.charAt(0).toUpperCase()+n.group.slice(1).replace("_"," ");return s[c]||(s[c]=[]),s[c].push(n),s},{}):{},[x]),b=((M=a.title)==null?void 0:M.trim())&&a.category,P=()=>{r("description",{title:a.title,category:a.category,companyName:a.companyName,location:a.location,jobType:a.jobType},{aiDescriptionType:a.aiDescriptionType,aiCustomPrompt:a.aiCustomPrompt}),y(!1)},T=m.useMemo(()=>{var s;return(s=x==null?void 0:x.find(n=>n.id===a.category))==null?void 0:s.name},[x,a.category]),V=m.useMemo(()=>a.jobType?a.jobType.charAt(0).toUpperCase()+a.jobType.slice(1):null,[a.jobType]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Job Details"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(g,{id:"job-title",label:"Job Title",error:l.title&&t.title,required:!0,hint:"Be specific, e.g., 'Senior React Developer'",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"job-title",type:"text",value:a.title||"",onChange:s=>o("title",s.target.value),onBlur:()=>d("title"),placeholder:"e.g. Retail Sales Assistant",className:"flex-1","aria-required":"true"}),e.jsxs(X,{open:E,onOpenChange:y,children:[e.jsx(Z,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"flex items-center gap-1.5 shrink-0",type:"button",disabled:!b,title:b?"AI Job Description Assistant":"Enter title & category first",onClick:()=>{b&&y(!0)},children:[e.jsx(I,{className:"h-4 w-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"AI Assist"})]})}),e.jsxs(_,{className:"sm:max-w-lg",children:[e.jsx(H,{children:"AI Job Description Assistant"}),e.jsx(Y,{children:"Let AI help craft a job description. Choose a style or provide custom instructions."}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("p",{children:["Using: ",e.jsx("strong",{children:a.title})," in ",e.jsx("strong",{children:T||a.category})]}),e.jsxs(ae,{defaultValue:a.aiDescriptionType||"basic",onValueChange:s=>o("aiDescriptionType",s),className:"w-full",children:[e.jsxs(se,{className:"grid w-full grid-cols-3",children:[e.jsx(v,{value:"basic",children:"Basic"}),e.jsx(v,{value:"detailed",children:"Detailed"}),e.jsx(v,{value:"custom",children:"Custom"})]}),e.jsx(N,{value:"basic",className:"p-4 border rounded-md mt-2 text-sm",children:"Generate a concise job description covering essential duties and requirements."}),e.jsx(N,{value:"detailed",className:"p-4 border rounded-md mt-2 text-sm",children:"Generate a comprehensive description with detailed responsibilities, qualifications, and benefits."}),e.jsx(N,{value:"custom",className:"p-4 border rounded-md mt-2",children:e.jsx(K,{placeholder:"e.g., Emphasize teamwork and a fast-paced environment. Mention our upcoming Project X.",value:a.aiCustomPrompt||"",onChange:s=>o("aiCustomPrompt",s.target.value),className:"min-h-[100px]"})})]})]}),e.jsxs(ee,{children:[e.jsx(f,{type:"button",variant:"ghost",onClick:()=>y(!1),children:"Cancel"}),e.jsxs(f,{type:"button",onClick:P,children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Generate Description"]})]})]})]})]})}),e.jsx(g,{id:"job-category",label:"Job Category",error:l.category&&t.category,required:!0,children:e.jsxs(w,{value:a.category||"",onValueChange:s=>o("category",s),onOpenChange:s=>{!s&&!a.category&&d("category")},children:[e.jsx(D,{id:"job-category",children:e.jsx(S,{placeholder:"Select a category",children:T})}),e.jsxs(A,{children:[q&&e.jsxs("div",{className:"p-2 text-sm text-gray-500 flex items-center",children:[e.jsx(R,{className:"h-4 w-4 animate-spin mr-2"}),"Loading..."]}),J&&e.jsx("div",{className:"p-2 text-sm text-red-500",children:"Error loading categories."}),Object.entries($).map(([s,n])=>e.jsxs(h.Fragment,{children:[e.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold text-gray-500 uppercase sticky top-0 bg-white",children:s}),n.map(c=>e.jsx(L,{value:c.id,children:c.name},c.id))]},s))]})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(g,{id:"job-type",label:"Job Type",error:l.jobType&&t.jobType,required:!0,children:e.jsxs(w,{value:a.jobType||"",onValueChange:s=>o("jobType",s),onOpenChange:s=>{!s&&!a.jobType&&d("jobType")},children:[e.jsx(D,{id:"job-type",children:e.jsx(S,{placeholder:"Select job type",children:V})}),e.jsx(A,{children:["full-time","part-time","contract","temporary","internship","volunteer"].map(s=>e.jsx(L,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]})}),e.jsx(g,{id:"job-location",label:"Location",error:l.location&&t.location,required:!a.isRemote,children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"job-location",type:"text",value:a.location||"",onChange:s=>{o("location",s.target.value),O(s.target.value)},onBlur:()=>{setTimeout(()=>{u([]),d("location")},200)},placeholder:"e.g. Cape Town, Western Cape",className:"w-full",disabled:a.isRemote}),B&&e.jsx(R,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-gray-400"}),p.length>0&&e.jsx("ul",{className:"absolute z-20 mt-1 w-full rounded-md border bg-white shadow-lg max-h-60 overflow-auto",children:p.map(s=>e.jsx("li",{className:"cursor-pointer px-3 py-2 hover:bg-gray-100 text-sm",onMouseDown:()=>{o("location",s.description),u([])},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400 mr-2 shrink-0"}),s.description]})},s.id))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{id:"remote-option",checked:a.isRemote||!1,onCheckedChange:s=>{o("isRemote",s),s&&(o("location",""),t.location&&u([]),d("location"))}}),e.jsx(k,{htmlFor:"remote-option",className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"This position is remote"})]})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(g,{id:"application-deadline",label:"Application Deadline (Optional)",error:l.applicationDeadline&&t.applicationDeadline,children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"application-deadline",type:"date",value:a.applicationDeadline||"",onChange:s=>o("applicationDeadline",s.target.value),onBlur:()=>d("applicationDeadline"),className:"w-full",min:new Date().toISOString().split("T")[0]}),e.jsx(W,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})}),e.jsx(g,{id:"salary-range",label:"Salary Range (Optional, ZAR)",error:l.salaryMin&&t.salaryMin||l.salaryMax&&t.salaryMax,hint:"Increases application rates",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"R"}),e.jsx(j,{id:"salary-min",type:"number",value:a.salaryMin||"",onChange:s=>o("salaryMin",s.target.value),onBlur:()=>d("salaryMin"),className:"w-full pl-7",placeholder:"Min",min:"0",step:"500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"R"}),e.jsx(j,{id:"salary-max",type:"number",value:a.salaryMax||"",onChange:s=>o("salaryMax",s.target.value),onBlur:()=>d("salaryMax"),className:"w-full pl-7",placeholder:"Max",min:a.salaryMin||"0",step:"500"})]})]}),t.salaryMin&&!t.salaryMax&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.salaryMin})||t.salaryMax&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.salaryMax})||t.salaryMin&&t.salaryMax&&t.salaryMin===t.salaryMax&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.salaryMin})||t.salaryMin&&t.salaryMax&&t.salaryMin!==t.salaryMax&&e.jsxs(e.Fragment,{children:[" ",e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.salaryMin})," ",e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.salaryMax})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{id:"salary-negotiable",checked:a.isSalaryNegotiable||!1,onCheckedChange:s=>o("isSalaryNegotiable",s)}),e.jsx(k,{htmlFor:"salary-negotiable",className:"text-sm",children:"Salary negotiable"})]})]})})]})]})};export{Ae as default};
