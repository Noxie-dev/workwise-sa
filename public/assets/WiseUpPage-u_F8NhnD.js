import{j as r,a as n}from"./vendor-BOJOR_z2.js";import{d as L,e as A,f as _,a as P,g as C}from"./index-BYuk7_JU.js";import{E as T,B as y,D as N,G as R,V as S,H as U,J as D,K as E}from"./contact-C28TQl3y.js";const O=({item:e})=>{const t=e.creator.name.charAt(0).toUpperCase();return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-7 rounded-xl shadow-lg mb-8 border-2 border-blue-200",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsxs(L,{className:"h-20 w-20 mr-5 ring-4 ring-blue-400 ring-offset-2",children:[r.jsx(A,{src:e.creator.avatar,alt:e.creator.name}),r.jsx(_,{className:"bg-blue-600 text-white text-2xl",children:t})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-2xl text-blue-800",children:e.creator.name}),r.jsx("p",{className:"text-blue-600 text-lg",children:e.creator.role})]})]}),r.jsx("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:e.title}),r.jsx("p",{className:"text-gray-700 mb-5 text-xl leading-relaxed",children:e.description}),e.tags&&e.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-3 mb-2",children:e.tags.map((l,i)=>r.jsx("span",{className:"bg-blue-100 text-blue-800 text-base px-4 py-2 rounded-full font-medium shadow-sm",children:l},i))})]}),e.resources&&e.resources.length>0&&r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-2 border-blue-100 mb-8",children:[r.jsx("h3",{className:"font-bold text-xl mb-4 text-blue-700",children:"Resources"}),r.jsx("ul",{className:"space-y-4",children:e.resources.map((l,i)=>r.jsxs("li",{className:"flex items-center bg-blue-50 p-4 rounded-lg hover:bg-blue-100 transition-colors shadow-sm",children:[r.jsx(T,{className:"h-6 w-6 mr-4 text-blue-600"}),r.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 hover:underline font-medium text-lg",children:l.title})]},i))})]}),r.jsxs("div",{className:"flex gap-4 mt-auto",children:[r.jsx(y,{size:"lg",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 text-xl rounded-xl shadow-lg",children:"Save"}),r.jsx(y,{variant:"outline",size:"lg",className:"flex-1 border-2 border-blue-600 text-blue-600 hover:bg-blue-50 font-bold py-4 text-xl rounded-xl shadow-lg",children:"Share"})]})]})},G=({item:e})=>r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center mr-3",children:r.jsx("span",{className:"text-yellow-800 font-bold",children:"AD"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold text-base",children:e.advertiser}),r.jsx("p",{className:"text-sm text-gray-500",children:"Sponsored"})]})]}),r.jsx("h1",{className:"text-xl font-bold mb-3",children:e.title}),r.jsx("p",{className:"text-gray-700 mb-4",children:e.description}),e.notes&&r.jsx("div",{className:"bg-gray-50 p-3 rounded-md mb-4",children:r.jsx("p",{className:"text-sm text-gray-600",children:e.notes})}),r.jsxs("div",{className:"mt-auto space-y-2",children:[r.jsxs(y,{className:"w-full bg-yellow-400 hover:bg-yellow-500 text-gray-800",children:[e.cta.primary.text,r.jsx(T,{className:"ml-2 h-4 w-4"})]}),r.jsx(y,{variant:"outline",className:"w-full text-blue-500",children:e.cta.secondary.text})]})]}),V=({currentItem:e})=>{const t=()=>e?e.type==="content"?"Content Details":"Advertisement Details":"Content loading";return r.jsx("aside",{className:"w-full border-2 border-blue-200 rounded-xl bg-white p-6 h-[85vh] max-h-[900px] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 shadow-2xl","aria-label":t(),children:e?e.type==="content"?r.jsx(O,{item:e}):r.jsx(G,{item:e}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-gray-500",children:"Loading..."})})})},$=({src:e,isPlaying:t,isMuted:l,onTogglePlay:i,onToggleMute:w,onTimeUpdate:g,onLoadedMetadata:u,onEnded:b,onError:x})=>{const a=n.useRef(null),[h,m]=n.useState(null);n.useEffect(()=>{if(!(!a.current||!e))if(t){const d=a.current.play();d!==void 0&&d.catch(o=>{var j;console.warn("Video play failed:",o),i(),o.name!=="NotAllowedError"&&(m(`Playback error: ${o.message}`),x(((j=a.current)==null?void 0:j.error)||null))})}else a.current.pause()},[t,e,i,x]),n.useEffect(()=>{a.current&&(a.current.muted=l)},[l]),n.useEffect(()=>{if(!(!a.current||!e)&&(a.current.currentTime=0,m(null),t)){const d=a.current.play();d!==void 0&&d.catch(o=>{console.warn("Autoplay failed after source change:",o),i()})}},[e,t,i]);const v=()=>{a.current&&g(a.current.currentTime,a.current.duration||0)},p=()=>{a.current&&u(a.current.duration||0)},s=()=>{b()},c=()=>{if(!a.current)return;const d=a.current.error;let o="Unknown video error";if(d)switch(d.code){case MediaError.MEDIA_ERR_ABORTED:o="Video playback was aborted";break;case MediaError.MEDIA_ERR_NETWORK:o="Network error occurred while loading the video";break;case MediaError.MEDIA_ERR_DECODE:o="Video decoding error";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:o="Video format is not supported";break;default:o=`Video error: ${d.message}`}m(o),x(d)};return r.jsxs("div",{className:"relative w-full h-full bg-black",children:[r.jsx("video",{ref:a,src:e,className:"w-full h-full object-contain",playsInline:!0,"aria-label":"WiseUp learning video or advertisement",onTimeUpdate:v,onLoadedMetadata:p,onEnded:s,onError:c}),h&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 p-4",children:r.jsxs("div",{className:"bg-red-600 text-white p-4 rounded-md max-w-md text-center",children:[r.jsx("p",{className:"font-semibold mb-2",children:"Video Error"}),r.jsx("p",{children:h})]})})]})},Y=({currentItem:e,isPlaying:t,isMuted:l,progress:i,currentTime:w,duration:g,onTogglePlay:u,onToggleMute:b,onTimeUpdate:x,onLoadedMetadata:a,onEnded:h,onNext:m,onPrevious:v,isNextDisabled:p,isPreviousDisabled:s})=>{const[c,d]=n.useState(null),o=f=>{if(isNaN(f)||!isFinite(f))return"00:00";const I=Math.floor(f/60),M=Math.floor(f%60);return`${I.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`},j=f=>{d(f)},k=f=>{d(null),a(f)};return r.jsx("div",{className:"w-full relative bg-black rounded-xl overflow-hidden h-[85vh] max-h-[900px] shadow-2xl border-2 border-blue-800",children:e?r.jsxs(r.Fragment,{children:[r.jsx($,{src:e.video,isPlaying:t,isMuted:l,onTogglePlay:u,onToggleMute:b,onTimeUpdate:x,onLoadedMetadata:k,onEnded:h,onError:j},e.id),!t&&!c&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-400 backdrop-blur-sm rounded-full p-6 pointer-events-auto transition-all duration-200 shadow-lg",onClick:u,"aria-label":"Play",children:r.jsx(N,{className:"h-10 w-10 text-white"})})}),!c&&r.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/90 to-transparent",children:[r.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full mb-4 cursor-pointer",role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Video progress",children:r.jsx("div",{className:"h-full bg-yellow-500 rounded-full",style:{width:`${i}%`}})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-400 text-white p-3 rounded-full transition-colors duration-200",onClick:u,"aria-label":t?"Pause":"Play",children:t?r.jsx(R,{className:"h-5 w-5"}):r.jsx(N,{className:"h-5 w-5"})}),r.jsx("button",{className:"bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-colors duration-200",onClick:b,"aria-label":l?"Unmute":"Mute",children:l?r.jsx(S,{className:"h-5 w-5"}):r.jsx(U,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"text-white text-sm font-medium bg-black/30 px-3 py-1 rounded-full",children:[o(w)," / ",o(g)]})]})]}),r.jsxs("div",{className:"absolute top-1/2 right-6 transform -translate-y-1/2 flex flex-col gap-4",children:[r.jsx("button",{className:`bg-black/40 hover:bg-black/60 text-white p-3 rounded-full shadow-lg transition-all duration-200 ${s?"opacity-40 cursor-not-allowed":""}`,onClick:v,disabled:s,"aria-label":"Previous content",children:r.jsx(D,{className:"h-6 w-6"})}),r.jsx("button",{className:`bg-black/40 hover:bg-black/60 text-white p-3 rounded-full shadow-lg transition-all duration-200 ${p?"opacity-40 cursor-not-allowed":""}`,onClick:m,disabled:p,"aria-label":"Next content",children:r.jsx(E,{className:"h-6 w-6"})})]}),!p&&r.jsxs("div",{className:"absolute bottom-24 right-6 text-white/80 text-xs flex items-center bg-black/30 px-3 py-1 rounded-full",children:[r.jsx("span",{className:"mr-1",children:"Swipe for next"}),r.jsx(E,{className:"h-4 w-4"})]})]}):r.jsx("div",{className:"flex items-center justify-center h-full text-white",children:r.jsx("p",{children:"Loading content..."})})})},W=({currentItem:e,isPlaying:t,isMuted:l,progress:i,currentTime:w,duration:g,onTogglePlay:u,onToggleMute:b,onTimeUpdate:x,onLoadedMetadata:a,onEnded:h,onNext:m,onPrevious:v,isNextDisabled:p,isPreviousDisabled:s})=>r.jsxs("div",{className:"flex flex-col md:flex-row flex-1 overflow-hidden h-full max-w-[1600px] mx-auto",children:[r.jsx("div",{className:"w-full md:w-3/5 mt-4 md:mt-0 md:order-1",children:r.jsx(Y,{currentItem:e,isPlaying:t,isMuted:l,progress:i,currentTime:w,duration:g,onTogglePlay:u,onToggleMute:b,onTimeUpdate:x,onLoadedMetadata:a,onEnded:h,onNext:m,onPrevious:v,isNextDisabled:p,isPreviousDisabled:s})}),r.jsx("div",{className:"w-full md:w-2/5 md:pl-6 md:order-2",children:r.jsx(V,{currentItem:e})})]}),J=[{id:1,type:"content",title:"Introduction to Job Interviews",creator:{name:"Sarah Johnson",role:"Career Coach",avatar:"/images/avatars/sarah.jpg"},video:"https://example.com/videos/interview-tips.mp4",description:"Learn the basics of job interviews and how to prepare effectively.",resources:[{title:"Interview Checklist",url:"https://example.com/resources/checklist.pdf"},{title:"Common Questions",url:"https://example.com/resources/questions.pdf"}],tags:["interview","career","preparation"],likeCount:245,commentCount:32},{id:2,type:"ad",advertiser:"TechCorp Solutions",title:"Join Our Internship Program",video:"https://example.com/videos/techcorp-ad.mp4",cta:{primary:{text:"Apply Now",url:"https://techcorp.example.com/apply"},secondary:{text:"Learn More",url:"https://techcorp.example.com/internships"}},description:"Gain valuable experience with our 3-month paid internship program.",notes:"Applications close on June 30th. Remote positions available."}],X={items:[],currentIndex:0,isLoading:!0,isPlaying:!1,isMuted:!1,progress:0,currentTime:0,duration:0};function B(e,t){switch(t.type){case"SET_ITEMS":return{...e,items:t.payload,isLoading:!1};case"SET_LOADING":return{...e,isLoading:t.payload};case"NEXT_ITEM":return e.currentIndex<e.items.length-1?{...e,currentIndex:e.currentIndex+1,isPlaying:!0,progress:0,currentTime:0}:e;case"PREVIOUS_ITEM":return e.currentIndex>0?{...e,currentIndex:e.currentIndex-1,isPlaying:!0,progress:0,currentTime:0}:e;case"TOGGLE_PLAY":return{...e,isPlaying:!e.isPlaying};case"SET_PLAYING":return{...e,isPlaying:t.payload};case"TOGGLE_MUTE":return{...e,isMuted:!e.isMuted};case"UPDATE_TIME":return{...e,currentTime:t.payload.currentTime,progress:t.payload.duration>0?t.payload.currentTime/t.payload.duration*100:0};case"SET_DURATION":return{...e,duration:t.payload};default:return e}}const F=()=>{const[e,t]=n.useReducer(B,X),{toast:l}=P(),{user:i}=C();n.useEffect(()=>{const s=setTimeout(()=>{t({type:"SET_ITEMS",payload:J})},1e3);return()=>clearTimeout(s)},[]),n.useEffect(()=>{const s=e.items[e.currentIndex];(s==null?void 0:s.type)==="ad"&&console.log(`Ad impression tracked: ${s.title}`)},[e.currentIndex,e.items]),n.useEffect(()=>{const s=c=>{c.key==="ArrowRight"?a():c.key==="ArrowLeft"?h():c.key===" "&&(c.preventDefault(),t({type:"TOGGLE_PLAY"}))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e.currentIndex,e.items.length]);const w=n.useCallback(()=>{t({type:"TOGGLE_PLAY"})},[]),g=n.useCallback(()=>{t({type:"TOGGLE_MUTE"})},[]),u=n.useCallback((s,c)=>{t({type:"UPDATE_TIME",payload:{currentTime:s,duration:c}})},[]),b=n.useCallback(s=>{t({type:"SET_DURATION",payload:s})},[]),x=n.useCallback(()=>{e.currentIndex<e.items.length-1?t({type:"NEXT_ITEM"}):(t({type:"SET_PLAYING",payload:!1}),l({title:"End of content",description:"You've reached the end of the available content."}))},[e.currentIndex,e.items.length,l]),a=n.useCallback(()=>{e.currentIndex<e.items.length-1?t({type:"NEXT_ITEM"}):l({title:"End of content",description:"You've reached the end of the available content."})},[e.currentIndex,e.items.length,l]),h=n.useCallback(()=>{e.currentIndex>0&&t({type:"PREVIOUS_ITEM"})},[e.currentIndex]);if(e.isLoading)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."});const m=e.items[e.currentIndex]||null,v=e.currentIndex>=e.items.length-1,p=e.currentIndex<=0;return r.jsxs("div",{className:"container mx-auto px-4 py-8 h-full",children:[r.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-blue-800 py-2 border-b-2 border-blue-200",children:"WiseUp Learning Hub"}),r.jsx(W,{currentItem:m,isPlaying:e.isPlaying,isMuted:e.isMuted,progress:e.progress,currentTime:e.currentTime,duration:e.duration,onTogglePlay:w,onToggleMute:g,onTimeUpdate:u,onLoadedMetadata:b,onEnded:x,onNext:a,onPrevious:h,isNextDisabled:v,isPreviousDisabled:p})]})},q=F;export{q as default};
